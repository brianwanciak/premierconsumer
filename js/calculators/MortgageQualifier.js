KJE.MortgageQualifierCalc=function(){this.CALCULATE_BY=KJE.MortgageQualifierCalc.PURCHASE_PRICE;this.MONTHS=0;this.SHOW_PAYMENT_BY_YEAR=true;this.bShowTotalInterest=true;this.OTHER_CLOSING_COSTS_RATE=0;this.LOAN_ORIGINATION_AMT=0;this.dEquitySum=0;this.dInterestSum=0;this.TAX_AMOUNT=0;this.PMI_PERCENT=KJE.parameters.get("PMI_PERCENT",0.2);this.USE_LOAN_ORIGINATION_AMOUNT=KJE.parameters.get("USE_LOAN_ORIGINATION_AMOUNT",false);this.USE_PROPERTY_TAX_AMOUNT=KJE.parameters.get("USE_PROPERTY_TAX_AMOUNT",false);this.USE_CLOSING_COSTS_AMOUNT=KJE.parameters.get("USE_OTHER_FEES_AMOUNT",true);this.MSG_ERROR1=KJE.parameters.get("MSG_ERROR1","Total closing costs exceed cash on hand.");this.MSG_ERROR2=KJE.parameters.get("MSG_ERROR2_START","Total debt payments exceeds KJE1 of your income.");this.bTERMINMONTHS=KJE.parameters.get("TERM_IN_MONTHS",false);this.bSHOW_LOAN_ORIGINATION_RATE=KJE.parameters.get("SHOW_LOAN_ORIGINATION_RATE",true);this.HIGH_DEBT_PITI_RATE=KJE.parameters.get("HIGH_DEBT_PITI_RATE",0.36);this.LOW_DEBT_PITI_RATE=KJE.parameters.get("LOW_DEBT_PITI_RATE",0.28);this.PMI_RATE=KJE.parameters.get("PMI_RATE",0.5);this.MSG_DOWNPAYMENT=KJE.parameters.get("MSG_DOWNPAYMENT","Down payment");this.MSG_REMAINING_CASH=KJE.parameters.get("MSG_REMAINING_CASH","Remaining cash");this.MSG_LOAN_ORIGINATION_RATE=KJE.parameters.get("MSG_LOAN_ORIGINATION_RATE","Loan origination");this.MSG_POINTS_PAID_NBR=KJE.parameters.get("MSG_POINTS_PAID_NBR","Points paid");this.MSG_OTHER_CLOSING_COSTS=KJE.parameters.get("MSG_OTHER_CLOSING_COSTS","Other closing costs");this.MSG_HOME_INSURANCE_RATE=KJE.parameters.get("MSG_HOME_INSURANCE_RATE","Home insurance");this.MSG_PMI_RATE=KJE.parameters.get("MSG_PMI_RATE","PMI");this.MSG_PROPERTY_TAX_RATE=KJE.parameters.get("MSG_PROPERTY_TAX_RATE","Property taxes");this.MSG_LABEL8=KJE.parameters.get("MSG_LABEL8","Principal and interest");this.DS_PRIN_BALANCE=null;this.DS_INTEREST_PAID=null;this.DS_EQUITY=null;this.DS_INTEREST=null;this.cats=null;this.sCatPayment=new Array(4);this.fCatPayment=KJE.FloatArray(4);this.sCatClosing=new Array(this.bSHOW_LOAN_ORIGINATION_RATE?5:4);this.fCatClosing=KJE.FloatArray(this.bSHOW_LOAN_ORIGINATION_RATE?5:4);this.sSchedule=new KJE.Repeating()};KJE.MortgageQualifierCalc.prototype.clear=function(){this.ANNUAL_INCOME=0;this.MONTHLY_CAR_PAYMENTS=0;this.CREDIT_CARD_PAYMENTS=0;this.OTHER_LOAN_PAYMENTS=0;this.DOWNPAYMENT_CLOSING_CASH=0;this.PROPERTY_TAX_RATE=0;this.HOME_INSURANCE_RATE=0;this.LOAN_ORIGINATION_RATE=0;this.INTEREST_RATE=0;this.LENGTH_OF_LOAN=0;this.POINTS_PAID_NBR=0;this.OTHER_CLOSING_COSTS=0;this.MAXIMUM_20_DOWN=false;this.TOTAL_MONTHLY_PAYMENT=0;this.PURCHASE_PRICE=0};KJE.MortgageQualifierCalc.prototype.calculate=function(N){var f=KJE;var U=this.MONTHLY_CAR_PAYMENTS;var q=this.CREDIT_CARD_PAYMENTS;var c=this.OTHER_LOAN_PAYMENTS;var z=this.DOWNPAYMENT_CLOSING_CASH;var T=this.PROPERTY_TAX_RATE;var D=this.HOME_INSURANCE_RATE;var B=this.LOAN_ORIGINATION_RATE;var e=this.INTEREST_RATE;var K=this.LENGTH_OF_LOAN;var r=this.POINTS_PAID_NBR;var m=this.OTHER_CLOSING_COSTS;var A=this.MAXIMUM_20_DOWN;var x=this.PURCHASE_PRICE;var V=0;var L=0;var d=0;var Z=0;var I=0;var M=0;var E=0;var v=0;var X=0;this.MONTHS=0;if(this.bTERMINMONTHS){this.MONTHS=K%12;K=Math.floor(K/12)}var w=false;var k=X*100;var u=this.TOTAL_MONTHLY_PAYMENT;var y=x;var t=X*200;var O=0;var j=0;var g=0;if(this.CALCULATE_BY==KJE.MortgageQualifierCalc.QLFY_SELECT_ANNUAL_INCOME){x=0;this.TOTAL_MONTHLY_PAYMENT=0}else{if(this.CALCULATE_BY==KJE.MortgageQualifierCalc.QLFY_SELECT_MONTHLY_PAYMENT){j=(this.TOTAL_MONTHLY_PAYMENT/this.LOW_DEBT_PITI_RATE)*12;g=((this.TOTAL_MONTHLY_PAYMENT+U+q+c)/this.HIGH_DEBT_PITI_RATE)*12;if(j>g){this.ANNUAL_INCOME=Math.round(j)}else{this.ANNUAL_INCOME=Math.round(g)}}else{w=false;k=x/2;t=x;var Q=2;O=0;var S=0;while(w==false){if(this.USE_LOAN_ORIGINATION_AMOUNT){B=(this.LOAN_ORIGINATION_AMT/t)*100}else{this.LOAN_ORIGINATION_AMT=t*(B/100)}if(this.USE_CLOSING_COSTS_AMOUNT){}else{m=f.round(t*(this.OTHER_CLOSING_COSTS_RATE/100),2)}d=t*(r/100);v=x*this.PMI_PERCENT;M=d+this.LOAN_ORIGINATION_AMT+m;E=z-M;if((E>v)&&A){E=v}if(v>E){I=t*(this.PMI_RATE/1200)}else{I=0}S=t+E;if(Math.round(x)==Math.round(S)){w=true}else{if(x>S){t+=k}else{t-=k}}t=f.round(t,0);k=(k/2);O++;if(O>50){w=true}}Z=f.round(KJE.PMT(e/1200,K*12+this.MONTHS,t),2);if(this.USE_PROPERTY_TAX_AMOUNT){V=this.TAX_AMOUNT}else{V=x*(T/100)}L=x*(D/100);this.TOTAL_MONTHLY_PAYMENT=L/12+V/12+Z+I;j=(this.TOTAL_MONTHLY_PAYMENT/(this.LOW_DEBT_PITI_RATE))*12;g=((this.TOTAL_MONTHLY_PAYMENT+U+q+c)/this.HIGH_DEBT_PITI_RATE)*12;if(j>g){this.ANNUAL_INCOME=f.round(j)}else{this.ANNUAL_INCOME=f.round(g)}}}var b=(this.ANNUAL_INCOME/12)*this.LOW_DEBT_PITI_RATE;var R=((this.ANNUAL_INCOME/12)*this.HIGH_DEBT_PITI_RATE)-(U+q+c);if(R<0){throw (KJE.replace("KJE1",f.percent(this.HIGH_DEBT_PITI_RATE),this.MSG_ERROR2))}if(b<R){X=b}else{X=R}w=false;k=X*100;if(this.CALCULATE_BY!=KJE.MortgageQualifierCalc.QLFY_SELECT_PURCHASE_PRICE){t=X*200}O=0;while(w==false){if(this.USE_LOAN_ORIGINATION_AMOUNT){B=(this.LOAN_ORIGINATION_AMT/t)*100}else{this.LOAN_ORIGINATION_AMT=t*(B/100)}if(this.USE_CLOSING_COSTS_AMOUNT){}else{m=f.round(t*(this.OTHER_CLOSING_COSTS_RATE/100),2)}d=t*(r/100);v=x*this.PMI_PERCENT;M=d+this.LOAN_ORIGINATION_AMT+m;E=z-M;if((E>v)&&(A==1)){E=v}if(v>E){I=t*(this.PMI_RATE/1200)}else{I=0}Z=f.round(KJE.PMT(e/1200,K*12+this.MONTHS,t),2);x=t+E;if(this.USE_PROPERTY_TAX_AMOUNT){V=this.TAX_AMOUNT}else{V=x*(T/100)}L=x*(D/100);this.TOTAL_MONTHLY_PAYMENT=L/12+V/12+Z+I;if(Math.round(this.TOTAL_MONTHLY_PAYMENT)==Math.round(X)){w=true}else{if(X>this.TOTAL_MONTHLY_PAYMENT){t+=k}else{t-=k}}k=(k/2);O++;if(O>50){w=true}}t=f.round(t,2);Z=f.round(KJE.PMT(e/1200,K*12+this.MONTHS,t),2);if(this.CALCULATE_BY==KJE.MortgageQualifierCalc.QLFY_SELECT_MONTHLY_PAYMENT){this.TOTAL_MONTHLY_PAYMENT=u}else{if(this.CALCULATE_BY==KJE.MortgageQualifierCalc.QLFY_SELECT_PURCHASE_PRICE){x=y}}var a=M+v;var h=f.round(K);this.DS_PRIN_BALANCE=KJE.FloatArray(h);this.DS_INTEREST_PAID=KJE.FloatArray(h);this.DS_EQUITY=KJE.FloatArray(h);this.DS_INTEREST=KJE.FloatArray(h);t=f.round(t,0);this.cats=new Array(h);if(N){var C=this.sSchedule;var s="";if(this.SHOW_PAYMENT_BY_YEAR){s=C.sReportCol("Year",2)}else{s=C.sReportCol("Month",1)}C.clearRepeat();C.addHeader(s,C.sReportCol("Payments",3),C.sReportCol("Interest",4),C.sReportCol("Principal",5),C.sReportCol("Balance",6),(this.bShowTotalInterest?C.sReportCol("Total Interest",7):null));C.addRepeat("&nbsp;","&nbsp;","&nbsp;","&nbsp;",f.dollars(t,2),(this.bShowTotalInterest?"&nbsp;":null))}var W=0;var J=t;var G=0;var l=e/1200;var o=0;var H=0;var F=0;var Y=0;this.dEquitySum=0;this.dInterestSum=0;for(Q=1;Q<=h*12+this.MONTHS;Q++){o=f.round(J*l,2);H=Z-o;J-=H;if(J<0){H+=J;J=0}else{if(Q==h*12+this.MONTHS){H+=J;J=0}}G+=o;F+=H;Y+=o;this.dEquitySum+=H;this.dInterestSum+=o;if(this.SHOW_PAYMENT_BY_YEAR==0){if(N){C.addRepeat(f.number(Q),f.dollars(o+H,2),f.dollars(o,2),f.dollars(H,2),f.dollars(J,2),(this.bShowTotalInterest?f.dollars(G,2):null))}}if((Q%12)==0){this.DS_PRIN_BALANCE[W]=J;this.DS_INTEREST_PAID[W]=G;this.DS_EQUITY[W]=F;this.DS_INTEREST[W]=Y;this.cats[W]=""+(W+1);if(N&&(this.SHOW_PAYMENT_BY_YEAR==1)){C.addRepeat(f.number(W+1),f.dollars(Y+F,2),f.dollars(Y,2),f.dollars(F,2),f.dollars(J,2),(this.bShowTotalInterest?f.dollars(G,2):null))}F=0;Y=0;W++}}this.REMAINING_CASH=z-M-E;this.PURCHASE_PRICE=x;this.LOAN_AMOUNT=t;this.PROPERY_TAX_AMT=V;this.HOME_INSURANCE_AMT=L;this.POINTS_PAID_AMT=d;this.MONTHLY_PI=Z;this.MONTHLY_PMI=I;this.TOTAL_CLOSING_COSTS=M;this.TOTAL_FOR_DOWNPAYMENT=E;this.PERCENT_20_DOWN_AMT=v;this.CLOSING_COSTS_PLUS_20=a;this.QLFY_PITI_ONLY=b;this.QLFY_PITI_DEBT=R;this.QLFY_AMOUNT=X;this.LENGTH_OF_LOAN=K;Q=0;this.fCatPayment[Q]=this.MONTHLY_INSURANCE=f.round(this.HOME_INSURANCE_AMT/12,2);this.sCatPayment[Q++]=this.MSG_HOME_INSURANCE_RATE+" "+f.dollars(this.HOME_INSURANCE_AMT/12,2);this.fCatPayment[Q]=this.MONTHLY_PMI;this.sCatPayment[Q++]=this.MSG_PMI_RATE+" "+f.dollars(this.MONTHLY_PMI,2);this.fCatPayment[Q]=this.MONTHLY_TAXES=f.round(this.PROPERY_TAX_AMT/12,2);this.sCatPayment[Q++]=this.MSG_PROPERTY_TAX_RATE+" "+f.dollars(this.PROPERY_TAX_AMT/12,2);this.fCatPayment[Q]=this.MONTHLY_PI;this.sCatPayment[Q]=this.MSG_LABEL8+" "+f.dollars(this.MONTHLY_PI,2);var P=0;this.fCatClosing[P]=(this.TOTAL_FOR_DOWNPAYMENT);this.sCatClosing[P++]=this.MSG_DOWNPAYMENT+" "+f.dollars(this.TOTAL_FOR_DOWNPAYMENT);if(this.bSHOW_LOAN_ORIGINATION_RATE){this.fCatClosing[P]=(this.LOAN_ORIGINATION_AMT);this.sCatClosing[P++]=this.MSG_LOAN_ORIGINATION_RATE+" "+f.dollars(this.LOAN_ORIGINATION_AMT)}this.fCatClosing[P]=this.POINTS_PAID_AMT;this.sCatClosing[P++]=this.MSG_POINTS_PAID_NBR+" "+f.dollars(this.POINTS_PAID_AMT);this.fCatClosing[P]=this.OTHER_CLOSING_COSTS;this.sCatClosing[P++]=this.MSG_OTHER_CLOSING_COSTS+" "+f.dollars(this.OTHER_CLOSING_COSTS);this.fCatClosing[P]=this.DOWNPAYMENT_CLOSING_CASH-this.TOTAL_CLOSING_COSTS-this.TOTAL_FOR_DOWNPAYMENT;this.sCatClosing[P]=this.MSG_REMAINING_CASH+" "+f.dollars(this.REMAINING_CASH);this.TOTAL_LOAN_PAYMENTS=this.CREDIT_CARD_PAYMENTS+this.MONTHLY_CAR_PAYMENTS+this.OTHER_LOAN_PAYMENTS};KJE.MortgageQualifierCalc.prototype.formatReport=function(b){var c=KJE;var a=this.iDecimal;var d=b;d=KJE.replace("TOTAL_CLOSING_COSTS_DP",c.dollars(this.TOTAL_CLOSING_COSTS+this.TOTAL_FOR_DOWNPAYMENT,2),d);d=KJE.replace("ANNUAL_INCOME",c.dollars(this.ANNUAL_INCOME),d);d=KJE.replace("MONTHLY_CAR_PAYMENTS",c.dollars(this.MONTHLY_CAR_PAYMENTS),d);d=KJE.replace("CREDIT_CARD_PAYMENTS",c.dollars(this.CREDIT_CARD_PAYMENTS),d);d=KJE.replace("OTHER_LOAN_PAYMENTS",c.dollars(this.OTHER_LOAN_PAYMENTS),d);d=KJE.replace("TOTAL_LOAN_PAYMENTS",c.dollars(this.TOTAL_LOAN_PAYMENTS),d);d=KJE.replace("MONTHLY_INCOME",c.dollars(this.ANNUAL_INCOME/12),d);d=KJE.replace("DOWNPAYMENT_CLOSING_CASH",c.dollars(this.DOWNPAYMENT_CLOSING_CASH),d);d=KJE.replace("PROPERTY_TAX_RATE",c.percent(this.PROPERTY_TAX_RATE/100,2),d);d=KJE.replace("HOME_INSURANCE_RATE",c.percent(this.HOME_INSURANCE_RATE/100,2),d);d=KJE.replace("LOAN_ORIGINATION_RATE",c.percent(this.LOAN_ORIGINATION_RATE/100,2),d);d=KJE.replace("INTEREST_RATE",c.percent(this.INTEREST_RATE/100,3),d);if(this.MONTHS>0){d=KJE.replace("LENGTH_OF_LOAN",c.number(this.LENGTH_OF_LOAN*12+this.MONTHS),d);d=KJE.replace("years","months",d);d=KJE.replace("Years","Months",d);d=KJE.replace("-year","-month",d)}else{d=KJE.replace("LENGTH_OF_LOAN",c.number(this.LENGTH_OF_LOAN),d)}d=KJE.replace("POINTS_PAID_NBR",c.number(this.POINTS_PAID_NBR,3),d);d=KJE.replace("PMI_RATE",c.percent(this.PMI_RATE/100,2),d);d=KJE.replace("OTHER_CLOSING_COSTS",c.dollars(this.OTHER_CLOSING_COSTS,2),d);d=KJE.replace("LOAN_AMOUNT",c.dollars(this.LOAN_AMOUNT),d);d=KJE.replace("PROPERY_TAX_AMT",c.dollars(this.PROPERY_TAX_AMT,2),d);d=KJE.replace("HOME_INSURANCE_AMT",c.dollars(this.HOME_INSURANCE_AMT,2),d);d=KJE.replace("MONTHLY_TAXES",c.dollars(this.MONTHLY_TAXES,2),d);d=KJE.replace("MONTHLY_INSURANCE",c.dollars(this.MONTHLY_INSURANCE,2),d);d=KJE.replace("LOAN_ORIGINATION_AMT",c.dollars(this.LOAN_ORIGINATION_AMT,2),d);d=KJE.replace("POINTS_PAID_AMT",c.dollars(this.POINTS_PAID_AMT,2),d);d=KJE.replace("MONTHLY_PI",c.dollars(this.MONTHLY_PI,2),d);d=KJE.replace("MONTHLY_PMI",c.dollars(this.MONTHLY_PMI,2),d);d=KJE.replace("TOTAL_CLOSING_COSTS",c.dollars(this.TOTAL_CLOSING_COSTS,2),d);d=KJE.replace("TOTAL_FOR_DOWNPAYMENT",c.dollars(this.TOTAL_FOR_DOWNPAYMENT,2),d);d=KJE.replace("PURCHASE_PRICE",c.dollars(this.PURCHASE_PRICE),d);d=KJE.replace("PERCENT_20_DOWN_AMT",c.dollars(this.PERCENT_20_DOWN_AMT),d);d=KJE.replace("CLOSING_COSTS_PLUS_20",c.dollars(this.CLOSING_COSTS_PLUS_20),d);d=KJE.replace("TOTAL_MONTHLY_PAYMENT",c.dollars(this.TOTAL_MONTHLY_PAYMENT,2),d);d=KJE.replace("MAXIMUM_20_DOWN",c.yesno(this.MAXIMUM_20_DOWN),d);d=KJE.replace("SHOW_PAYMENT_BY_MONTH",c.yesno(!this.SHOW_PAYMENT_BY_YEAR),d);d=KJE.replace("HIGH_DEBT_PITI_RATE",c.percent(this.HIGH_DEBT_PITI_RATE),d);d=KJE.replace("SHOW_PAYMENT_BY_YEAR",c.yesno(this.SHOW_PAYMENT_BY_YEAR),d);d=KJE.replace("LOW_DEBT_PITI_RATE",c.percent(this.LOW_DEBT_PITI_RATE),d);d=KJE.replace("QLFY_PITI_ONLY",c.dollars(this.QLFY_PITI_ONLY),d);d=KJE.replace("QLFY_PITI_DEBT",c.dollars(this.QLFY_PITI_DEBT),d);d=KJE.replace("QLFY_AMOUNT",c.dollars(this.QLFY_AMOUNT),d);d=KJE.replace("PMI_PERCENT",c.percent(this.PMI_PERCENT),d);d=KJE.replace("REMAINING_CASH",c.dollars(this.REMAINING_CASH,2),d);d=KJE.replace("INTEREST_PAID",c.dollars(this.dInterestSum,2),d);d=KJE.replace("TOTAL_OF_PAYMENTS",c.dollars(this.dEquitySum+this.dInterestSum,2),d);d=d.replace("**REPEATING GROUP**",this.sSchedule.getRepeat());this.sSchedule.clearRepeat();return d};KJE.MortgageQualifierCalc.QLFY_SELECTIONS=KJE.parameters.get("ARRAY_QLFY_SELECTIONS",["Annual income","Purchase price","Total monthly payment"]);KJE.MortgageQualifierCalc.QLFY_INDEXES=[0,1,2];KJE.MortgageQualifierCalc.QLFY_SELECT_ANNUAL_INCOME=0;KJE.MortgageQualifierCalc.QLFY_SELECT_PURCHASE_PRICE=1;KJE.MortgageQualifierCalc.QLFY_SELECT_MONTHLY_PAYMENT=2;KJE.CalcName="Mortgage Qualifier";KJE.CalcType="mortgagequalifier";KJE.CalculatorTitleTemplate="You can purchase a KJE1 home";KJE.parseInputs=function(b){b=KJE.replace("**TERM**",KJE.getMortgageTermDrop("TERM",30),b);var a=KJE.getDropBox("CALCULATE_BY",KJE.parameters.get("CALCULATE_BY",KJE.MortgageQualifierCalc.QLFY_SELECT_ANNUAL_INCOME),KJE.MortgageQualifierCalc.QLFY_INDEXES,KJE.MortgageQualifierCalc.QLFY_SELECTIONS);b=KJE.replace("**CALCULATE_BY**",a,b);return b};KJE.initialize=function(){KJE.CalcControl=new KJE.MortgageQualifierCalc();KJE.GuiControl=new KJE.MortgageQualifier(KJE.CalcControl)};KJE.MortgageQualifier=function(o){var f=KJE;var b=KJE.gLegend;var g=KJE.inputs.items;this.MSG_GRAPH5=KJE.parameters.get("MSG_GRAPH5","Principal balance");this.MSG_GRAPH6=KJE.parameters.get("MSG_GRAPH6","Interest paid to date");this.MSG_GRAPH8=KJE.parameters.get("MSG_GRAPH8","Interest");this.MSG_GRAPH9=KJE.parameters.get("MSG_GRAPH9","Principal");KJE.Slider("ANNUAL_INCOME","Annual income",0,2000000,0,KJE.FMT_DOLLARS,0,KJE.s_label[3],KJE.useScale(3));KJE.Slider("TOTAL_MONTHLY_PAYMENT","Total monthly payment",0,50000,0,KJE.FMT_DOLLARS,0,KJE.s_label[0],KJE.useScale(0));KJE.MortgageAmtSlider("PURCHASE_PRICE","Purchase price");KJE.DollarSlider("MONTHLY_CAR_PAYMENTS","Monthly car payment(s)",0,10000);KJE.DollarSlider("CREDIT_CARD_PAYMENTS","Credit card payment(s)",0,10000);KJE.DollarSlider("OTHER_LOAN_PAYMENTS","Other loan payment(s)",0,10000);KJE.DollarSlider("DOWNPAYMENT_CLOSING_CASH","Cash on hand",0,10000000);KJE.PercentSlider("PROPERTY_TAX_RATE","Property tax",0,20,2);KJE.PercentSlider("HOME_INSURANCE_RATE","Home insurance",0,10,2);KJE.Label("LOAN_AMOUNT","Loan amount",null,null,"bold");if(o.USE_LOAN_ORIGINATION_AMOUNT){KJE.DollarSlider("LOAN_ORIGINATION_RATE","Loan origination",0,100000)}else{KJE.PercentSlider("LOAN_ORIGINATION_RATE","Loan origination",0,5,2)}KJE.MortgageRateSlider("INTEREST_RATE","Interest rate");KJE.NumberSlider("POINTS_PAID_NBR","Points paid",-4,8,3,0.5);if(o.USE_CLOSING_COSTS_AMOUNT){KJE.DollarSlider("OTHER_CLOSING_COSTS","Other closing costs",0,10000)}else{KJE.PercentSlider("OTHER_CLOSING_COSTS","Other closing costs",0,5,2)}KJE.Checkbox("MAXIMUM_20_DOWN",KJE.getKJEReplaced(KJE.parameters.get("MSG_LABEL3","Limit downpayment to KJE1"),f.percent(o.PMI_PERCENT)));KJE.NumberSlider("TERM_MONTHS","Term in months",KJE.parameters.get("TERM_MONTHS_MIN",0),KJE.parameters.get("TERM_MONTHS_MAX",480));KJE.MortgageTermDropBoxSlider("TERM","Term in years");if(o.bTERMINMONTHS){g.TERM.hide()}else{g.TERM_MONTHS.hide()}KJE.DropBox("CALCULATE_BY","Calculate for",null,null,"bold");KJE.Radioboxes("BY_YEAR","Report amortization",true,"Annually","Monthly");var k=KJE.gNewGraph(KJE.gPIE,"GRAPH1",true,false,KJE.colorList[1],KJE.parameters.get("MSG_GRAPH10","KJE1 Monthly Payment Breakdown"));k._legend._iOrientation=(b.TOP_RIGHT);k._titleXAxis.setText(KJE.parameters.get("MSG_GRAPH7","Year of Loan"));var h=KJE.gNewGraph(KJE.gCATEGORIES,"GRAPH3",true,true,KJE.colorList[1],KJE.parameters.get("MSG_GRAPHTITLE","Use of KJE1 Cash on Hand"));h._legend._iOrientation=(b.TOP_RIGHT);h._titleYAxis.setText(KJE.sCurrency);h._titleXAxis.setText(KJE.parameters.get("MSG_AXIS_TITLE","Down Payment and Closing Costs"));h._axisX.setVisible(false);var i=KJE.gNewGraph(KJE.gLINE,"GRAPH2",true,true,KJE.colorList[1],KJE.parameters.get("MSG_TOTAL_PAYMENTS","Total Payments: ")+this.MSG_GRAPH8+" KJE1, "+this.MSG_GRAPH9+" KJE2");i._legend._iOrientation=(KJE.gLegend.TOP_RIGHT);i._titleYAxis.setText(KJE.sCurrency);i._titleXAxis.setText(KJE.MSG_YEAR_LBL);if(this.bSHOW_LOAN_ORIGINATION_RATE){g.LOAN_ORIGINATION_RATE.hide();g.LOAN_ORIGINATION_RATE.setValue(0,true)}var a=KJE.parameters.get("MSG_DROPPER_TITLE","Mortgage information:");var d=KJE.parameters.get("MSG_DROPPER_CLOSETITLE"," Annual income of KJE1 qualifies for KJE2 per month");var e=function(){return a+KJE.subText(KJE.getKJEReplaced(d,g.ANNUAL_INCOME.getFormatted(),g.TOTAL_MONTHLY_PAYMENT.getFormatted()),"KJECenter")};KJE.addDropper(new KJE.Dropper("INPUTS",true,a,e),KJE.colorList[0]);var n=KJE.parameters.get("MSG_DROPPER_DEBT","Total monthly debt payments:");var m=function(){return n+"|"+KJE.subText(f.dollars(o.TOTAL_LOAN_PAYMENTS),"KJERightBold")};KJE.addDropper(new KJE.Dropper("DEBT",false,m,m),KJE.colorList[0]);var c=KJE.parameters.get("MSG_DROPPER_DOWNPAYMENT","Down Payment and Closing Costs:");var j=function(){return c+"|"+KJE.subText(f.dollars(o.TOTAL_CLOSING_COSTS),"KJERightBold")};KJE.addDropper(new KJE.Dropper("DOWNPAYMENT",false,j,j),KJE.colorList[0])};KJE.MortgageQualifier.prototype.setValues=function(b){var a=KJE.inputs.items;b.CALCULATE_BY=a.CALCULATE_BY.getValue();if(b.CALCULATE_BY==KJE.MortgageQualifierCalc.QLFY_SELECT_ANNUAL_INCOME){a.ANNUAL_INCOME.enable();a.TOTAL_MONTHLY_PAYMENT.disable();a.PURCHASE_PRICE.disable();b.ANNUAL_INCOME=a.ANNUAL_INCOME.getValue()}else{if(b.CALCULATE_BY==KJE.MortgageQualifierCalc.QLFY_SELECT_MONTHLY_PAYMENT){a.ANNUAL_INCOME.disable();a.TOTAL_MONTHLY_PAYMENT.enable();a.PURCHASE_PRICE.disable();b.TOTAL_MONTHLY_PAYMENT=a.TOTAL_MONTHLY_PAYMENT.getValue()}else{a.ANNUAL_INCOME.disable();a.TOTAL_MONTHLY_PAYMENT.disable();a.PURCHASE_PRICE.enable();b.PURCHASE_PRICE=a.PURCHASE_PRICE.getValue()}}b.MONTHLY_CAR_PAYMENTS=a.MONTHLY_CAR_PAYMENTS.getValue();b.CREDIT_CARD_PAYMENTS=a.CREDIT_CARD_PAYMENTS.getValue();b.OTHER_LOAN_PAYMENTS=a.OTHER_LOAN_PAYMENTS.getValue();b.DOWNPAYMENT_CLOSING_CASH=a.DOWNPAYMENT_CLOSING_CASH.getValue();b.PROPERTY_TAX_RATE=a.PROPERTY_TAX_RATE.getValue();b.HOME_INSURANCE_RATE=a.HOME_INSURANCE_RATE.getValue();if(b.USE_LOAN_ORIGINATION_AMOUNT){b.LOAN_ORIGINATION_AMT=a.LOAN_ORIGINATION_RATE.getValue()}else{b.LOAN_ORIGINATION_RATE=a.LOAN_ORIGINATION_RATE.getValue()}if(b.USE_CLOSING_COSTS_AMOUNT){b.OTHER_CLOSING_COSTS=a.OTHER_CLOSING_COSTS.getValue()}else{b.OTHER_CLOSING_COSTS_RATE=a.OTHER_CLOSING_COSTS.getValue()}b.INTEREST_RATE=a.INTEREST_RATE.getValue();if(b.bTERMINMONTHS){b.LENGTH_OF_LOAN=a.TERM_MONTHS.getValue()}else{b.LENGTH_OF_LOAN=a.TERM.getValue()}b.POINTS_PAID_NBR=a.POINTS_PAID_NBR.getValue();b.MAXIMUM_20_DOWN=a.MAXIMUM_20_DOWN.getValue();b.SHOW_PAYMENT_BY_YEAR=a.BY_YEAR.getValue()};KJE.MortgageQualifier.prototype.refresh=function(e){var d=KJE;var c=KJE.gLegend;var b=KJE.inputs.items;KJE.setTitleTemplate(d.dollars(e.PURCHASE_PRICE));var a=KJE.gGraphs[2];a.removeAll();a.setTitleTemplate(d.dollars(e.dInterestSum),d.dollars(e.dEquitySum));a.setGraphCategories(e.cats);a.add(new KJE.gGraphDataSeries(e.DS_PRIN_BALANCE,this.MSG_GRAPH5,a.getColor(1)));a.add(new KJE.gGraphDataSeries(e.DS_INTEREST_PAID,this.MSG_GRAPH6,a.getColor(2)));a.paint();a=KJE.gGraphs[0];a.removeAll();a.setTitleTemplate(d.dollars(e.TOTAL_MONTHLY_PAYMENT),KJE.getTermLabel(e.TERM));a.setGraphCategories(e.sCatPayment);a.add(new KJE.gGraphDataSeries(e.fCatPayment,"",a.getColor(1)));a.paint();a=KJE.gGraphs[1];a.removeAll();a.setTitleTemplate(d.dollars(e.DOWNPAYMENT_CLOSING_CASH));a.setGraphCategories(e.sCatClosing);a.add(new KJE.gGraphDataSeries(e.fCatClosing,"",a.getColor(1)));a._axisY._bAutoMinimum=false;a._axisY._axisMinimum=(e.TOTAL_FOR_DOWNPAYMENT<0?(e.TOTAL_FOR_DOWNPAYMENT):0);a._axisY._axisMinimum=(e.POINTS_PAID_AMT<a._axisY._axisMinimum?(e.POINTS_PAID_AMT):0);a.paint();b.LOAN_AMOUNT.setText(d.dollars(e.LOAN_AMOUNT),true);b.TOTAL_MONTHLY_PAYMENT.setValue(e.TOTAL_MONTHLY_PAYMENT,true);b.ANNUAL_INCOME.setValue(e.ANNUAL_INCOME,true);b.PURCHASE_PRICE.setValue(e.PURCHASE_PRICE,true)};KJE.InputScreenText=" <div id=KJE-D-INPUTS><div id=KJE-P-INPUTS>Input information:</div></div> <div id=KJE-E-INPUTS > <div id='KJE-C-CALCULATE_BY'>**CALCULATE_BY**</div> <div id='KJE-C-ANNUAL_INCOME'><input id='KJE-ANNUAL_INCOME' /></div> <div id='KJE-C-PURCHASE_PRICE'><input id='KJE-PURCHASE_PRICE' /></div> <div id='KJE-C-TOTAL_MONTHLY_PAYMENT'><input id='KJE-TOTAL_MONTHLY_PAYMENT' /></div> <div style=\"height:10px\"></div> <div id='KJE-C-LOAN_AMOUNT'><div id='KJE-LOAN_AMOUNT'></div></div> <div id=\"KJE-C-TERM\">**TERM**</div> <div id=\"KJE-C-TERM_MONTHS\"><input id='KJE-TERM_MONTHS' /></div> <div id='KJE-C-INTEREST_RATE'><input id='KJE-INTEREST_RATE' /></div> <div id='KJE-C-PROPERTY_TAX_RATE'><input id='KJE-PROPERTY_TAX_RATE' /></div> <div id='KJE-C-HOME_INSURANCE_RATE'><input id='KJE-HOME_INSURANCE_RATE' /></div> <div id=\"KJE-C-BY_YEAR\"><input id=\"KJE-BY_YEAR1\" type=radio name=BY_YEAR /><input id=\"KJE-BY_YEAR2\" type=radio name=BY_YEAR /></div> <div style=\"height:10px\"></div> </div> <div id=KJE-D-DOWNPAYMENT><div id=KJE-P-DOWNPAYMENT>Downpayment and closing costs</div></div> <div id=KJE-E-DOWNPAYMENT > <div id='KJE-C-DOWNPAYMENT_CLOSING_CASH'><input id='KJE-DOWNPAYMENT_CLOSING_CASH' /></div> <div id='KJE-C-LOAN_ORIGINATION_RATE'><input id='KJE-LOAN_ORIGINATION_RATE' /></div> <div id='KJE-C-POINTS_PAID_NBR'><input id='KJE-POINTS_PAID_NBR' /></div> <div id='KJE-C-OTHER_CLOSING_COSTS'><input id='KJE-OTHER_CLOSING_COSTS' /></div> <div id='KJE-C-MAXIMUM_20_DOWN'><input id='KJE-MAXIMUM_20_DOWN' type=checkbox /></div> <div style=\"height:10px\"></div> </div> <div id=KJE-D-DEBT><div id=KJE-P-DEBT>Prepayment information</div></div> <div id=KJE-E-DEBT > <div id='KJE-C-MONTHLY_CAR_PAYMENTS'><input id='KJE-MONTHLY_CAR_PAYMENTS' /></div> <div id='KJE-C-CREDIT_CARD_PAYMENTS'><input id='KJE-CREDIT_CARD_PAYMENTS' /></div> <div id='KJE-C-OTHER_LOAN_PAYMENTS'><input id='KJE-OTHER_LOAN_PAYMENTS' /></div> <div style=\"height:10px\"></div> </div> **GRAPH1** **GRAPH2** **GRAPH3** ";KJE.DefinitionText=" <div id='KJE-D-ANNUAL_INCOME' ><dt>Annual income</dt><dd>Your annual income before taxes. For joint applicants this is your total combined annual income before taxes.</dd></div> <div id='KJE-D-PURCHASE_PRICE' ><dt>Purchase price</dt><dd>The price of the home you wish to purchase. This is the actual price you'll pay, not including any closing costs.</dd></div> <div id='KJE-D-TOTAL_MONTHLY_PAYMENT' ><dt>Total monthly payment</dt><dd>Total monthly payment that you can qualify for. This is the total of principal, interest, taxes and insurance paid each month, often called PITI.</dd></div> <div id='KJE-D-TERM' ><dt>Term in years</dt><dd>The number of years over which you will repay this loan. The most common mortgage terms are 15 years and 30 years.</dd></div> <div id='KJE-D-INTEREST_RATE' ><dt>Interest rate</dt><dd>The current annual interest rate you can receive on your mortgage.</dd></div> <div id='KJE-D-PROPERTY_TAX_RATE' ><dt>Property tax rate</dt><dd>Your property tax rate. 1% for a $100,000 home equals $1,000 per year in property taxes.</dd></div> <div id='KJE-D-HOME_INSURANCE_RATE' ><dt>Home insurance rate</dt><dd>Your home owner's insurance rate. 0.5% for a $100,000 home equals $500 per year for homeowner's insurance.</dd></div> <div id='KJE-D-BY_YEAR' ><dt>Show schedule by month</dt><dd>Select to show the payment schedule by month or year when you press the &quot;View Report&quot; button.</dd></div> <div id='KJE-D-DOWNPAYMENT_CLOSING_CASH' ><dt>Cash on hand</dt><dd>Cash you have for the down payment and all closing costs.</dd></div> <div id='KJE-D-LOAN_ORIGINATION_RATE' ><dt>Loan origination rate</dt><dd>The percentage the lending institution charges for its origination fee. 1% for a $100,000 home equals $1,000.</dd></div> <div id='KJE-D-POINTS_PAID_NBR' ><dt>Number of points paid</dt><dd>The total number of points paid to reduce the interest rate of your mortgage. Each point costs 1% of your mortgage balance.</dd></div> <div id='KJE-D-OTHER_CLOSING_COSTS' ><dt>Other closing costs</dt><dd>Estimate of all other closing costs for this loan. This should include filing fees, appraiser fees and any other miscellaneous fees paid.</dd></div> <div id='KJE-D-MAXIMUM_20_DOWN' ><dt>Limit down payment</dt><dd>Limit your down payment to percentage required to eliminate the need for PMI payments. Even if you have more cash on hand than required for closing costs, checking this box will limit your down payment to the minimum amount required to forego PMI.</dd></div> <div id='KJE-D-MONTHLY_CAR_PAYMENTS' ><dt>Monthly car payment(s)</dt><dd>Total monthly payment for your car loan(s).</dd></div> <div id='KJE-D-CREDIT_CARD_PAYMENTS' ><dt>Credit card payments</dt><dd>Total monthly minimum payments for your credit cards.</dd></div> <div id='KJE-D-OTHER_LOAN_PAYMENTS' ><dt>Other loan payments</dt><dd>Any other installment loan payments, such as student loans or unsecured loans.</dd></div> <div ><dt>Total closing costs</dt><dd>Total upfront costs to close your loan. This is the total of your loan origination fee, points paid and other closing costs.</dd></div> <div ><dt>Monthly PMI payment</dt><dd>Monthly cost of Principal Mortgage Insurance (PMI). For loans secured with less than 20% down, PMI is estimated at 0.5% of your loan balance each year. Monthly PMI is calculated by multiplying your starting loan balance by this percent and dividing by 12. When the equity in your home exceeds the percentage required for PMI, your PMI payment drops to zero. Please note that this is only an estimate of your actual PMI. The amount you may be required to pay may be higher or lower than our estimate.</dd></div> <div ><dt>Monthly PI payment</dt><dd>Monthly principal and interest payment.</dd></div> <div ><dt>Total for down payment</dt><dd>Total funds remaining, after closing costs, for down payment.</dd></div> <div ><dt>Total annual income debt percentage</dt><dd>Not shown. This is the percentage of your annual income your financial institution allows you to use for debt installment payments. This includes car payments, credit card payments, other loan payments and your principal, interest, taxes and insurance payment for your home. The default rate is 36%.</dd></div> <div ><dt>PITI annual income percentage</dt><dd>Not shown. This is the percentage of your annual income your financial institution allows you to use for your principal, interest, taxes and insurance payment for your home. The default rate is 28%.</dd></div> ";KJE.ReportText=' <h2 class=\'KJEReportHeader KJEFontHeading\'>An annual income of ANNUAL_INCOME may qualify you for LOAN_AMOUNT loan.</h2> Using your input values, an annual income of ANNUAL_INCOME should enable you to carry a LENGTH_OF_LOAN-year mortgage at INTEREST_RATE in the amount of LOAN_AMOUNT. With a TOTAL_FOR_DOWNPAYMENT down payment, the total purchase price would be PURCHASE_PRICE. Total closing costs for this loan are estimated at TOTAL_CLOSING_COSTS. **GRAPH** <div class=KJECenter><div class=KJEReportTableDiv><table class=KJEReportTable><caption class=\'KJEHeaderRow KJEHeading\'>Monthly Payment TOTAL_MONTHLY_PAYMENT (PI<!--STARTHIDETAXES-->TI<!--ENDHIDETAXES-->)</caption> <tr class=KJEOddRow><td class="KJELabel KJECellBorder KJECell70">Principal and interest</td><td class="KJECell KJECell30">MONTHLY_PI</td></tr> <!--STARTHIDETAXES--> <tr class=KJEEvenRow><td class="KJELabel KJECellBorder">PMI</td><td class="KJECell">MONTHLY_PMI</td></tr> <!--ENDHIDETAXES--> <!--STARTHIDETAXES--><tr class=KJEOddRow><td class="KJELabel KJECellBorder">Taxes</td><td class="KJECell">MONTHLY_TAXES</td></tr> <!--ENDHIDETAXES--> <!--STARTHIDETAXES--><tr class=KJEEvenRow><td class="KJELabel KJECellBorder">Insurance</td><td class="KJECell">MONTHLY_INSURANCE</td></tr><!--ENDHIDETAXES--> </table></div></div> <!--STARTHIDETAXES--> <p>To avoid PMI payments a PERCENT_20_DOWN_AMT down payment is required. This equals PMI_PERCENT of your home\'s purchase price. The total amount of cash required for a PMI_PERCENT down payment plus closing costs would be CLOSING_COSTS_PLUS_20. <p><!--ENDHIDETAXES--> <h2 class=\'KJEReportHeader KJEFontHeading\'>Qualify Calculation</h2> <p>Your qualifying payment of QLFY_AMOUNT per month is calculated by taking the lower of these two calculations: <ol> <li>Monthly Income X LOW_DEBT_PITI_RATE = monthly PI<!--STARTHIDETAXES-->TI<!--ENDHIDETAXES--><br />MONTHLY_INCOME X LOW_DEBT_PITI_RATE = QLFY_PITI_ONLY<p></p></li> <li>Monthly Income X HIGH_DEBT_PITI_RATE - Other debt payments = monthly PI<!--STARTHIDETAXES-->TI<!--ENDHIDETAXES--><br />MONTHLY_INCOME X HIGH_DEBT_PITI_RATE - TOTAL_LOAN_PAYMENTS = QLFY_PITI_DEBT</li> </ol> <div class=KJECenter><div class=KJEReportTableDiv><table class=KJEReportTable><caption class=\'KJEHeaderRow KJEHeading\'>Mortgage Summary</caption> <tr class=KJEOddRow><td class="KJELabel KJECellBorder KJECell70" >Loan amount</td><td class="KJECell KJECell30">LOAN_AMOUNT</td></tr> <tr class=KJEEvenRow><td class="KJELabel KJECellBorder KJECell70" >Annual income</td><td class=KJECell>ANNUAL_INCOME</td></tr> <tr class=KJEOddRow><td class="KJELabel KJECellBorder KJECell70" >Purchase price</td><td class=KJECell>PURCHASE_PRICE</td></tr> <tr class=KJEEvenRow><td class="KJELabel KJECellBorder">Monthly payment (PI)</td><td class=KJECell>MONTHLY_PI</td></tr> <tr class=KJEOddRow><td class="KJELabel KJECellBorder">Term</td><td class=KJECell>LENGTH_OF_LOAN years</td></tr> <tr class=KJEEvenRow><td class="KJELabel KJECellBorder">Interest rate</td><td class=KJECell>INTEREST_RATE</td></tr> </table></div></div> <div class=KJECenter> <div class=KJEReportTableDiv><table class=KJEReportTable><caption class=\'KJEHeaderRow KJEHeading\'>Monthly Debt Payments</caption> <tr class=KJEOddRow><td class="KJELabel KJECellBorder KJECell70">Monthly car payment(s)</td><td class="KJECell KJECell30">MONTHLY_CAR_PAYMENTS</td></tr> <tr class=KJEEvenRow><td class="KJELabel KJECellBorder">Credit card payment(s)</td><td class=KJECell>CREDIT_CARD_PAYMENTS</td></tr> <tr class=KJEOddRow><td class="KJELabel KJECellBorder">Other loan payments</td><td class=KJECell>OTHER_LOAN_PAYMENTS</td></tr> <tr class=KJEFooterRow><td class="KJELabel KJECellBorder">Total monthly debt payments</td><td class=KJECell>TOTAL_LOAN_PAYMENTS</td></tr> </TABLE></div> </div> <h2 class=\'KJEReportHeader KJEFontHeading\'>Closing Costs</h2> **GRAPH** <div class=KJECenter><div class=KJEReportTableDiv><table class=KJEReportTable><caption class=\'KJEHeaderRow KJEHeading\'>Down Payment and Closing Costs</caption> <tr class=KJEFooterRow><td class="KJELabel KJECellBorder KJECell70">Cash on hand</td><td class="KJECellStrong">DOWNPAYMENT_CLOSING_CASH</td></tr> <tr class=KJEOddRow><td class="KJELabel KJECellBorder">Down payment</td><td class=KJECell>TOTAL_FOR_DOWNPAYMENT</td></tr> <tr class=KJEEvenRow><td class="KJELabel KJECellBorder">Loan origination fee</td><td class="KJECell">LOAN_ORIGINATION_AMT</td></tr> <tr class=KJEOddRow><td class="KJELabel KJECellBorder">Fee for points paid</td><td class="KJECell">POINTS_PAID_AMT</td></tr> <tr class=KJEEvenRow><td class="KJELabel KJECellBorder">Other closing costs</td><td class="KJECell">OTHER_CLOSING_COSTS</td></tr> <tr class=KJEFooterRow><td class="KJELabel KJECellBorder">Total closing costs</td><td class="KJECellStrong">TOTAL_CLOSING_COSTS_DP</td></tr> <tr class=KJEFooterRow><td class="KJELabel KJECellBorder">Remaining cash</td><td class="KJECellStrong">REMAINING_CASH</td></tr> </table></div></div> <h2 class=\'KJEReportHeader KJEFontHeading\'>Total Payments</h2> **GRAPH** <div class=KJECenter><div class=KJEReportTableDiv><table class=KJEReportTable><caption class=\'KJEHeaderRow KJEHeading\'>Total Principal and Interest Payments</caption> <tr class=KJEOddRow><td class="KJELabel KJECellBorder">Total principal and interest payments</td><td class=KJECellStrong>TOTAL_OF_PAYMENTS</td></tr> <tr class=KJEEvenRow><td class="KJELabel KJECellBorder">Total interest</td><td class=KJECellStrong>INTEREST_PAID</td></tr> </table></div></div> <h2 class=\'KJEScheduleHeader KJEFontHeading\'>Payment Schedule</h2> **REPEATING GROUP** ';