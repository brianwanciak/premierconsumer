KJE.SocialSecurityCalc=function(){this.iDecimal=0;this.ADJUST_ONLY=false;this.SOCIAL_SECURITY_CURRENT_MAX=118500;this.SOCIAL_SECURITY_AP_MAX=31668;this.SOCIAL_SECURITY_MAX_RATIO=0.26724;this.SOCIAL_EARLIEST_RETIRE_AGE=62;this.SOCIAL_NORMAL_RETIRE_AGE=67;this.SOCIAL_LATEST_RETIRE_AGE=70;this.EARLY_DISCOUNTS=[0.7,0.75,0.8,0.86666,0.93333,1];this.EARLY_AGE_CUTOFFS=[75,61,0];this.AGE_FULL_BENEFITS=[65,66,67];this.LATE_AGE_CUTOFFS=[71,0];this.LATE_AGE_INCREASES=[0.075,0.08];this.SOCIAL_SPOUSE_BENEFIT=0.5;this.SOCIAL_FULL_BENEFIT_AMT=0;this.cats=null;this.DS_SOCIAL_PAYMENTS=null;this.DR_SOCIAL_PAYMENTS=null;this.MSG_SUMMARY_TEXT=KJE.parameters.get("MSG_SUMMARY_TEXT","Social Security may provide KJE1");this.MSG_GRAPH3=KJE.parameters.get("MSG_GRAPH3","Estimated Monthly Benefits");this.MSG_SUMMARY_TEXT2=KJE.parameters.get("MSG_SUMMARY_TEXT2","If you start collecting your benefits at age KJE2 you could receive approximately KJE3 per year or KJE4 per month. This is KJE5 of your final year's income of KJE6. This is only an estimate. Actual benefits depend on work history and the complete compensation rules used by Social Security.");this.SUMMARY_TEXT="";this.SUMMARY_TEXT2="";this.WAGE_CUTOFFS=[10000,20000,30000,40000,50000,60000,70000,80000,90000,this.SOCIAL_SECURITY_CURRENT_MAX];this.SOCIAL_FULL_BENEFIT=[0.6096,0.4878,0.3972,0.3525,0.3252,0.3072,0.2943,0.2847,0.2684,this.SOCIAL_SECURITY_MAX_RATIO];this.sSchedule=new KJE.Repeating()};KJE.SocialSecurityCalc.prototype.clear=function(){this.CURRENT_AGE=0;this.HOUSEHOLD_INCOME=0;this.SALARY_PERCENT=0;this.SOCIAL_SECURITY_INCREASE_RATE=0;this.MARRIED=0;this.AGE_OF_RETIREMENT=0};KJE.SocialSecurityCalc.prototype.calculate=function(G){var g=KJE;var k=this.CURRENT_AGE;var s=this.HOUSEHOLD_INCOME;var c=this.SALARY_PERCENT;var q=this.SOCIAL_SECURITY_INCREASE_RATE;var m=this.MARRIED;var H=this.AGE_OF_RETIREMENT;var J=0;var d=0;var o=0;var C=0;var z=0;var a=0;var r=65;var B=0;var b=0;var F=0;var A=0;var D=q/100;if(H<this.SOCIAL_EARLIEST_RETIRE_AGE){C=this.SOCIAL_EARLIEST_RETIRE_AGE}else{C=H}for(var v=0;v<this.EARLY_AGE_CUTOFFS.length;v++){if(this.EARLY_AGE_CUTOFFS[v]<k){r=this.AGE_FULL_BENEFITS[v];break}}for(v=0;v<this.LATE_AGE_CUTOFFS.length;v++){if(k>=this.LATE_AGE_CUTOFFS[v]){F=this.LATE_AGE_INCREASES[v];break}}if(!this.ADJUST_ONLY){this.SOCIAL_FULL_BENEFIT_AMT=0;b=r-k;var f=b-1;f=(f<0?0:f);d=g.round(KJE.FV_AMT(D,f,this.SOCIAL_SECURITY_CURRENT_MAX),2);this.WAGE_CUTOFFS[this.WAGE_CUTOFFS.length-1]=this.SOCIAL_SECURITY_CURRENT_MAX;J=KJE.FV_AMT(c/100,f,s);var t=J;this.SOCIAL_FULL_BENEFIT_PERCENT=(this.SOCIAL_FULL_BENEFIT[this.SOCIAL_FULL_BENEFIT.length-1]*d)/t;for(var u=0;u<this.WAGE_CUTOFFS.length;u++){if(t<KJE.FV_AMT(D,f,this.WAGE_CUTOFFS[u])){if(u==0){this.SOCIAL_FULL_BENEFIT_PERCENT=this.SOCIAL_FULL_BENEFIT[u]}else{var e=KJE.FV_AMT(D,f,this.WAGE_CUTOFFS[u]);var j=KJE.FV_AMT(D,f,this.WAGE_CUTOFFS[u-1]);var E=e-j;var I=e-t;var w=I/E;this.SOCIAL_FULL_BENEFIT_PERCENT=this.SOCIAL_FULL_BENEFIT[u]+(this.SOCIAL_FULL_BENEFIT[u-1]-this.SOCIAL_FULL_BENEFIT[u])*w}break}}if(m>0){this.SOCIAL_FULL_BENEFIT_PERCENT=this.SOCIAL_FULL_BENEFIT_PERCENT*(1+this.SOCIAL_SPOUSE_BENEFIT)}this.SOCIAL_FULL_BENEFIT_AMT=g.round(this.SOCIAL_FULL_BENEFIT_PERCENT*t,0);if(m>0){this.SOCIAL_FULL_BENEFIT_PERCENT=this.SOCIAL_FULL_BENEFIT_AMT/J}}var l=this.SOCIAL_LATEST_RETIRE_AGE-this.SOCIAL_EARLIEST_RETIRE_AGE+1;this.cats=new Array(l);this.DS_SOCIAL_PAYMENTS=new Array(l);this.DR_SOCIAL_PAYMENTS=new Array(l);for(v=0;v<l;v++){this.cats[v]=g.number(this.SOCIAL_EARLIEST_RETIRE_AGE+v);if(this.SOCIAL_EARLIEST_RETIRE_AGE+v<=r){this.DR_SOCIAL_PAYMENTS[v]=g.round(this.SOCIAL_FULL_BENEFIT_AMT*this.EARLY_DISCOUNTS[v+this.SOCIAL_NORMAL_RETIRE_AGE-r],0)}else{this.DR_SOCIAL_PAYMENTS[v]=g.round(this.SOCIAL_FULL_BENEFIT_AMT*(1+F*(this.SOCIAL_EARLIEST_RETIRE_AGE-r+v)),0)}if(C==(this.SOCIAL_EARLIEST_RETIRE_AGE+v)){var y=(C-k-1);A=KJE.FV_AMT(c/100,y<0?0:y,s);a=this.DR_SOCIAL_PAYMENTS[v]/A;o=this.DR_SOCIAL_PAYMENTS[v];z=this.DR_SOCIAL_PAYMENTS[v]/12}}if(G){var h=this.sSchedule;h.clearRepeat();h.addHeader(h.sReportCol("Age<br />Benefits Begin",1),h.sReportCol("Amount<br />per Month",2),h.sReportCol("Amount<br />per Year",3))}var x=0;for(v=1;v<=l;v++){x=v-1;this.DS_SOCIAL_PAYMENTS[x]=this.DR_SOCIAL_PAYMENTS[x]/12;if(G){h.addRepeat(g.number(x+this.SOCIAL_EARLIEST_RETIRE_AGE,0),g.dollars(this.DR_SOCIAL_PAYMENTS[x]/12),g.dollars(this.DR_SOCIAL_PAYMENTS[x]))}}this.FUTURE_HOUSEHOLD_INCOME=J;this.SOCIAL_SECURITY_MAX=d;this.SOCIAL_AT_RETIRE_AMT=o;this.SOCIAL_AT_RETIRE_AGE=C;this.SOCIAL_AT_RETIRE_AMT_MONTHLY=z;this.SOCIAL_AT_RETIRE_PERCENT=a;this.SOCIAL_FULL_BENEFIT_AGE=r;this.SOCIAL_FULL_BENEFIT_PERCENT=B;this.YEARS_UNTIL_SOCIAL_FULL_BENEFITS=b;this.SOCIAL_DELAYED_RETIRE_PERCENT=F;this.HOUSEHOLD_INCOME_AT_RETIRE=A};KJE.SocialSecurityCalc.prototype.formatReport=function(b){var c=KJE;var a=this.iDecimal;var d=b;d=KJE.replace("FUTURE_HOUSEHOLD_INCOME",c.dollars(this.FUTURE_HOUSEHOLD_INCOME),d);d=KJE.replace("HOUSEHOLD_INCOME_AT_RETIRE",c.dollars(this.HOUSEHOLD_INCOME_AT_RETIRE),d);d=KJE.replace("SOCIAL_SECURITY_MAX",c.dollars(this.SOCIAL_SECURITY_MAX),d);d=KJE.replace("SOCIAL_AT_RETIRE_AGE",c.number(this.SOCIAL_AT_RETIRE_AGE),d);d=KJE.replace("SOCIAL_AT_RETIRE_AMT_MONTHLY",c.dollars(this.SOCIAL_AT_RETIRE_AMT_MONTHLY),d);d=KJE.replace("SOCIAL_AT_RETIRE_AMT",c.dollars(this.SOCIAL_AT_RETIRE_AMT),d);d=KJE.replace("SOCIAL_AT_RETIRE_PERCENT",c.percent(this.SOCIAL_AT_RETIRE_PERCENT,2),d);d=KJE.replace("SOCIAL_FULL_BENEFIT_AMT",c.dollars(this.SOCIAL_FULL_BENEFIT_AMT),d);d=KJE.replace("SOCIAL_FULL_BENEFIT_AGE",c.number(this.SOCIAL_FULL_BENEFIT_AGE),d);d=KJE.replace("SOCIAL_FULL_BENEFIT_PERCENT",c.percent(this.SOCIAL_FULL_BENEFIT_PERCENT,2),d);d=KJE.replace("YEARS_UNTIL_SOCIAL_FULL_BENEFITS",c.number(this.YEARS_UNTIL_SOCIAL_FULL_BENEFITS),d);d=KJE.replace("CURRENT_AGE",c.number(this.CURRENT_AGE),d);d=KJE.replace("HOUSEHOLD_INCOME",c.dollars(this.HOUSEHOLD_INCOME),d);d=KJE.replace("SALARY_PERCENT",c.percent(this.SALARY_PERCENT/100,2),d);d=KJE.replace("MARRIED",c.yesno(this.MARRIED),d);d=KJE.replace("AGE_OF_RETIREMENT",c.number(this.AGE_OF_RETIREMENT),d);d=KJE.replace("SOCIAL_SECURITY_CURRENT_MAX",c.dollars(this.SOCIAL_SECURITY_CURRENT_MAX),d);d=KJE.replace("SOCIAL_SECURITY_INCREASE_RATE",c.percent(this.SOCIAL_SECURITY_INCREASE_RATE/100,2),d);d=KJE.replace("INFLATION_RATE",c.percent(this.SOCIAL_SECURITY_INCREASE_RATE/100,2),d);d=KJE.replace("SOCIAL_EARLIEST_RETIRE_AGE",c.number(this.SOCIAL_EARLIEST_RETIRE_AGE),d);d=KJE.replace("SOCIAL_LATEST_RETIRE_AGE",c.number(this.SOCIAL_LATEST_RETIRE_AGE),d);d=KJE.replace("SOCIAL_DELAYED_RETIRE_PERCENT",c.percent(this.SOCIAL_DELAYED_RETIRE_PERCENT,2),d);d=d.replace("**REPEATING GROUP**",this.sSchedule.getRepeat());this.sSchedule.clearRepeat();return d};KJE.SocialSecurityCalc.prototype.formatGraph=function(a,b){b[0].setTitle(this.MSG_GRAPH3);b[0].setTitleGraph(this.MSG_GRAPH3);b[0].show(true);b[0].paint()};KJE.RetirementPlanCalc=function(){this.SHOW_SOCIAL=KJE.parameters.get("SHOW_SOCIAL",true);this.MSG_ERROR1=KJE.parameters.get("MSG_ERROR1","Both current savings and monthly income cannot be zero.");this.MSG_ERROR2=KJE.parameters.get("MSG_ERROR2","Current age must be less than retirement age.");this.MSG_ERROR3=KJE.parameters.get("MSG_ERROR3","Start age can't be less than retirement age.");this.NEST_EGG=KJE.parameters.get("NEST_EGG",false);this.MSG_GRAPH_TITLE=KJE.parameters.get("MSG_GRAPH_TITLE","You need to save KJE1 per month to meet your retirement needs.");this.MSG_TITLE=KJE.parameters.get("MSG_TITLE","You may need KJE1 to retire at age KJE2");this.MSG_LABEL_3=KJE.parameters.get("MSG_LABEL_3","Your plan is on track.");this.MSG_LABEL_4=KJE.parameters.get("MSG_LABEL_4","You may need to save more.");this.MSG_RUNOUT=KJE.parameters.get("MSG_RUNOUT_BOLD","Retirement savings runs out at age AGE_RUN_OUT.");this.MSG_SUCCESS=KJE.parameters.get("MSG_SUCCESS_BOLD","Balance at end of retirement is ENDING_BALANCE.");this.MSG_RESULT=KJE.parameters.get("MSG_SUCCESS","Your plan provides KJE1 when you retire. This assumes annual retirement expenses of KJE2 which is KJE3 of your last year's income of KJE4.");this.MSG_RESULT_SOCIAL=KJE.parameters.get("MSG_RESULT_SOCIAL","This includes KJE5 per year from Social Security.");this.MSG_RESULT_EXTRA=KJE.parameters.get("MSG_RESULT_EXTRA","");this.MSG_RESULT_EXTRA_GRAPH=KJE.parameters.get("MSG_RESULT_EXTRA_GRAPH","");this.MSG_SUCCESS_REPORT=KJE.parameters.get("MSG_SUCCESS_REPORT","Does not run out of funds.");this.MSG_RUNOUT_REPORT=KJE.parameters.get("MSG_RUNOUT_REPORT","Retirement funds run out at age KJE1.");this.MSG_INFLATION_REPORT=KJE.parameters.get("MSG_INFLATION_REPORT","This amount is increased INFLATION_RATE each year until you retire and through your retirement to account for inflation.");this.MSG_SOCIAL_SECURITY=KJE.parameters.get("MSG_SOCIAL_SECURITY","This plan includes SOCIALSECURITY_AT_RETIRE per year from Social Security.");this.MSG_START_OF_MESSAGE=KJE.parameters.get("MSG_START_OF_MESSAGE","");this.MSG_GRAPH_REPORT_TITLE=KJE.parameters.get("MSG_GRAPH_REPORT_TITLE","Retirement Savings and Expenditures");this.sGraph2=KJE.parameters.get("GRAPH_2","Savings for retirement");this.sGraph3=KJE.parameters.get("GRAPH_3","Total expenses");this.bATRETIREMENT=false;this.iDecimals=0;this.RESPONSE="";this.RESPONSE1="";this.RESPONSE2="";this.START_OF_MESSAGE="";this.INCREASE_ANNUAL_SAVINGS=(this.NEST_EGG?false:true);this.YEARS_OF_RETIREMENT=0;this.dAdjustedSavingsRate=0;this.dAdjustedRorRate=0;this.dAdjustedSalaryPercent=0;this.dAdjusteYearsToRetirement=0;this.RESULTS_MSG="";this.INCOME_PERCENT=0;this.AGE_RUN_OUT=0;this.END_OF_RETIREMENT_MESSAGE="";this.SOCIAL_SECURITY_INCREASE_RATE=0.024;this.CURRENT_TAX=0;this.RETIREMENT_TAX=0;this.RETIREMENT_TAX_WITHDRAWALS=false;this.SOCIAL_SECURITY_TAX_WITHDRAWALS=false;this.USE_NET_INCOME=KJE.parameters.get("USE_NET_INCOME",false);this.SHORT_RESULTS=false;this.OTHER_PENSION_START=[0,0,0];this.OTHER_PENSION_AMOUNT=[0,0,0];this.OTHER_PENSION_LASTS=[0,0,0];this.OTHER_PENSION_START_MIN=KJE.FloatArray(3);this.OTHER_PENSION_ENFORCE_MIN=new Array(3);this.OTHER_PENSION_USERETIREAGE=new Array(3);for(var a=0;a<3;a++){this.OTHER_PENSION_START_MIN[a]=KJE.parameters.get("OTHER_PENSION_START"+(a+1)+"_MIN",14);this.OTHER_PENSION_ENFORCE_MIN[a]=KJE.parameters.get("OTHER_PENSION_ENFORCE"+(a+1)+"_MIN",false);this.OTHER_PENSION_USERETIREAGE[a]=KJE.parameters.get("OTHER_PENSION_USERETIREAGE"+(a+1),false)}this.OTHER_PENSION_INFLATION=[false,false,false];this.OTHER_PENSION_CPP=[KJE.parameters.get("OTHER_PENSION_CPP1",false),KJE.parameters.get("OTHER_PENSION_CPP2",false),KJE.parameters.get("OTHER_PENSION_CPP3",false)];this.OTHER_PENSION_COUNT=KJE.parameters.get("OTHER_PENSION_COUNT",0);this.OTHER_PENSION_AMOUNT_ADJUSTED=[0,0,0];this.OTHER_PENSION_AMOUNT_ADJUSTED=[0,0,0];this.CPP_MINIMUM_AGE=60;this.CPP_MAXIMUM_AGE=71;this.CPP_NOMINAL_AGE=65;this.OAS_START_65=56;this.OAS_START_66=52;this.CPP_ADJUSTMENT_EARLY=0.072;this.CPP_ADJUSTMENT_LATE=0.084;this.DD_RETIRE1=KJE.FloatArray(3);this.DD_RETIRE2=KJE.FloatArray(3);this.DS_RETIRE1=KJE.FloatArray(3);this.DR_SALARY=null;this.DR_BEGINING_BALANCE=null;this.DR_ENDING_BALANCE=null;this.DR_INTEREST=null;this.DR_SAVINGS=null;this.DR_RETIREMENT_INCOME=null;this.DR_SOCIAL_SECURITY_INCOME=null;this.DR_RETIREMENT_WITHDRAWAL=null;this.DS_INFLATION_INCREASE=KJE.FloatArray(4);this.DS_INFLATION_RUNOUT=KJE.FloatArray(4);this.DS_SAVEMORE_INCREASE=KJE.FloatArray(5);this.DS_SAVEMORE_RUNOUT=KJE.FloatArray(5);this.CS_INFLATION_RUNOUT=new Array(4);this.CS_SAVEMORE_RUNOUT=new Array(5);this.cats=null;this.cats2=new Array(3);this.CAT_LABELS=KJE.parameters.get("ARRAY_CAT_LABELS",["Projected nestegg required:","Projected nestegg required after Social Security:","Projected nestegg required after current Savings:"]);this.INFLATION_RESULTS=false;this.SAVEMORE_RESULTS=false;this.sSchedule=new KJE.Repeating()};KJE.RetirementPlanCalc.prototype.clear=function(){this.CURRENT_AGE=0;this.HOUSEHOLD_INCOME=0;this.PRE_RATE_OF_RETURN=0;this.AGE_OF_RETIREMENT=0;this.POST_RATE_OF_RETURN=0;this.SALARY_PERCENT=0;this.CURRENT_SAVINGS=0;this.INFLATION_RATE=0;this.INCLUDE_SOCIAL_SECURITY=false;this.MARRIED=false;this.SAVINGS_PERCENT=0;var a=this.DD_RETIRE1.length;for(var c=0;c<a;c++){this.DD_RETIRE1[c]=0;this.DD_RETIRE2[c]=0}};KJE.RetirementPlanCalc.prototype.calculate=function(P){var e=KJE;var m=this.CURRENT_AGE;var A=this.HOUSEHOLD_INCOME;var y=this.PRE_RATE_OF_RETURN;var x=this.AGE_OF_RETIREMENT;var v=this.POST_RATE_OF_RETURN;var s=this.SALARY_PERCENT;var p=this.CURRENT_SAVINGS;var o=this.INFLATION_RATE;var L=this.INCLUDE_SOCIAL_SECURITY;var k=this.MARRIED;var W=this.SAVINGS_PERCENT;var b=0;var d=0;var V=0;var C=0;var F=0;var l=0;var g=0;var M=0;var c=0;var J=0;var w=y/100;var j=v/100;var B=p;if(this.OTHER_PENSION_CPP){if(m>=this.OAS_START_65){this.OTHER_PENSION_START_MIN[2]=65}else{if(m>=this.OAS_START_66){this.OTHER_PENSION_START_MIN[2]=66}else{this.OTHER_PENSION_START_MIN[2]=67}}}var h=this.YEARS_UNTIL_RETIREMENT=x-m;this.AGE_RUN_OUT=0;if(this.SHOW_SOCIAL&&this.INCLUDE_SOCIAL_SECURITY){var E=new KJE.SocialSecurityCalc();E.clear();E.CURRENT_AGE=(m>69?69:m);E.HOUSEHOLD_INCOME=A;E.AGE_OF_RETIREMENT=(x>70?70:x);E.SALARY_PERCENT=s;E.SOCIAL_SECURITY_INCREASE_RATE=o;E.MARRIED=k;E.calculate();g=E.SOCIAL_AT_RETIRE_AMT;M=(m>E.SOCIAL_AT_RETIRE_AGE?m:E.SOCIAL_AT_RETIRE_AGE)}else{g=0;M=65;L=false}this.SOCIALSECURITY_START_AGE=M;this.SOCIALSECURITY_AT_RETIRE=g;this.INCLUDE_SOCIAL_SECURITY=L;var H=e.round(A*(W/100),0);var r=H/12;if(m>x){throw (this.MSG_ERROR2)}this.bATRETIREMENT=false;if(m==x){m=m-1;this.CURRENT_AGE=m;this.bATRETIREMENT=true}var f=Math.round(h+this.YEARS_OF_RETIREMENT);var U=0;var R=0;var T=0;this.DS_SAVINGS=KJE.FloatArray(f);this.DS_WITHDRAWAL=KJE.FloatArray(f);this.DR_SALARY=KJE.FloatArray(f);this.DR_BEGINING_BALANCE=KJE.FloatArray(f);this.DR_ENDING_BALANCE=KJE.FloatArray(f);this.DR_INTEREST=KJE.FloatArray(f);this.DR_SAVINGS=KJE.FloatArray(f);this.DR_RETIREMENT_INCOME=KJE.FloatArray(f);this.DR_SOCIAL_SECURITY_INCOME=KJE.FloatArray(f);this.DR_RETIREMENT_WITHDRAWAL=KJE.FloatArray(f);this.DR_RETIREMENT_TAXES=KJE.FloatArray(f);this.cats=new Array(f);var D=false;for(T=0;T<this.OTHER_PENSION_AMOUNT.length;T++){if(this.OTHER_PENSION_CPP[T]){D=this.OTHER_PENSION_CPP[T]}if(this.OTHER_PENSION_USERETIREAGE[T]){this.OTHER_PENSION_START[T]=x;if(this.OTHER_PENSION_START[T]<this.OTHER_PENSION_START_MIN[T]&&this.OTHER_PENSION_ENFORCE_MIN[T]){this.OTHER_PENSION_START[T]=this.OTHER_PENSION_START_MIN[T]}}if(this.OTHER_PENSION_START[T]<x&&this.OTHER_PENSION_START[T]!=0){throw (this.MSG_ERROR3)}}for(T=0;T<this.OTHER_PENSION_AMOUNT.length;T++){if(!this.OTHER_PENSION_CPP[T]||(this.OTHER_PENSION_START[T]==this.CPP_NOMINAL_AGE)){this.OTHER_PENSION_AMOUNT_ADJUSTED[T]=this.OTHER_PENSION_AMOUNT[T]}else{if(this.OTHER_PENSION_START[T]>this.CPP_NOMINAL_AGE){this.OTHER_PENSION_AMOUNT_ADJUSTED[T]=this.OTHER_PENSION_AMOUNT[T]+((this.OTHER_PENSION_START[T]-this.CPP_NOMINAL_AGE)*this.CPP_ADJUSTMENT_LATE*this.OTHER_PENSION_AMOUNT[T])}else{if(this.OTHER_PENSION_START[T]<this.CPP_NOMINAL_AGE){this.OTHER_PENSION_AMOUNT_ADJUSTED[T]=this.OTHER_PENSION_AMOUNT[T]-((this.CPP_NOMINAL_AGE-this.OTHER_PENSION_START[T])*this.CPP_ADJUSTMENT_EARLY*this.OTHER_PENSION_AMOUNT[T])}else{this.OTHER_PENSION_AMOUNT_ADJUSTED[T]=this.OTHER_PENSION_AMOUNT[T]}}}}var a=0;var Q=0;var O=0;for(T=1;T<=f;T++){U=T-1;if(U==0){this.DR_BEGINING_BALANCE[U]=p;V=A;C=V*(1-this.CURRENT_TAX/100);F=V*(this.INCOME_PERCENT/100);l=C*(this.INCOME_PERCENT/100)}else{this.DR_BEGINING_BALANCE[U]=this.DR_ENDING_BALANCE[U-1]}if((h-T)>0){this.DR_SAVINGS[U]=(this.INCREASE_ANNUAL_SAVINGS?((U==0?A:this.DR_SALARY[U-1])*(W/100)):H);this.DR_SALARY[U]=KJE.FV_AMT(s/100,T,A);this.DR_INTEREST[U]=(this.DR_BEGINING_BALANCE[U])*(w);this.DR_RETIREMENT_INCOME[U]=0;this.DR_SOCIAL_SECURITY_INCOME[U]=0;this.DR_RETIREMENT_WITHDRAWAL[U]=0;V=this.DR_SALARY[U];C=V*(1-this.CURRENT_TAX/100);F=V*(this.INCOME_PERCENT/100);l=C*(this.INCOME_PERCENT/100)}else{this.DR_SALARY[U]=KJE.FV_AMT(o/100,(T-h-(this.bATRETIREMENT?1:0)),V);this.DR_INTEREST[U]=this.DR_BEGINING_BALANCE[U]*(j);this.DR_SAVINGS[U]=0;this.DR_RETIREMENT_INCOME[U]=(this.DR_SALARY[U]*(this.INCOME_PERCENT/100))*(1-(this.USE_NET_INCOME?this.CURRENT_TAX/100:0));if((((T+m)-M)>=0)&&L){this.DR_SOCIAL_SECURITY_INCOME[U]=KJE.FV_AMT(o/100,(T+m-M),g);if(this.SOCIAL_SECURITY_TAX_WITHDRAWALS){this.DR_RETIREMENT_TAXES[U]=this.DR_SOCIAL_SECURITY_INCOME[U]*(this.RETIREMENT_TAX/200)}}else{this.DR_SOCIAL_SECURITY_INCOME[U]=0}var K=0;var N=0;for(R=0;R<this.OTHER_PENSION_AMOUNT.length;R++){if(this.OTHER_PENSION_AMOUNT[R]>0){K=T+m-(this.OTHER_PENSION_START[R]==0?x:this.OTHER_PENSION_START[R]);if(K>=0){if(this.OTHER_PENSION_LASTS[R]==0||this.OTHER_PENSION_LASTS[R]>K){if(this.OTHER_PENSION_INFLATION[R]){N+=KJE.FV_AMT(o/100,T-1,this.OTHER_PENSION_AMOUNT_ADJUSTED[R]*12)}else{N+=this.OTHER_PENSION_AMOUNT_ADJUSTED[R]*12}}}}}this.DR_SOCIAL_SECURITY_INCOME[U]+=N;if(this.RETIREMENT_TAX_WITHDRAWALS){this.DR_RETIREMENT_TAXES[U]+=N*(this.RETIREMENT_TAX/100)}this.DR_RETIREMENT_WITHDRAWAL[U]=this.DR_RETIREMENT_INCOME[U]+this.DR_RETIREMENT_TAXES[U]-this.DR_SOCIAL_SECURITY_INCOME[U];if(this.USE_NET_INCOME&&this.DR_RETIREMENT_WITHDRAWAL[U]>0&&this.RETIREMENT_TAX_WITHDRAWALS){var z=this.DR_RETIREMENT_WITHDRAWAL[U]/(1-(this.RETIREMENT_TAX/100));this.DR_RETIREMENT_TAXES[U]+=z-this.DR_RETIREMENT_WITHDRAWAL[U];this.DR_RETIREMENT_WITHDRAWAL[U]=z}var u=1;a=KJE.NPV_AMT(j,T-h+1,this.DR_RETIREMENT_WITHDRAWAL[U]);this.DD_RETIRE1[1]+=a;this.DD_RETIRE2[1]+=this.DR_RETIREMENT_WITHDRAWAL[U];Q=KJE.NPV_AMT(j,T-h+1,this.DR_RETIREMENT_INCOME[U]);this.DD_RETIRE1[0]+=Q;this.DD_RETIRE2[0]+=this.DR_RETIREMENT_INCOME[U]}this.DR_ENDING_BALANCE[U]=this.DR_BEGINING_BALANCE[U]+this.DR_INTEREST[U]+this.DR_SAVINGS[U]-this.DR_RETIREMENT_WITHDRAWAL[U];if((h-T)==1){B=this.DR_ENDING_BALANCE[U]}if(this.DR_ENDING_BALANCE[U]<=0){var S=(this.AGE_RUN_OUT!=0?this.DR_RETIREMENT_WITHDRAWAL[U]:(-1)*this.DR_ENDING_BALANCE[U]);O=KJE.NPV_AMT(j,T-h+1,S);this.DD_RETIRE1[2]+=O;this.DD_RETIRE2[2]+=S;if(this.AGE_RUN_OUT==0){this.AGE_RUN_OUT=T+m}this.DR_RETIREMENT_WITHDRAWAL[U]=this.DR_BEGINING_BALANCE[U]+this.DR_INTEREST[U]+this.DR_SAVINGS[U];this.DR_ENDING_BALANCE[U]=0}}var t=this.DR_ENDING_BALANCE[U];this.END_OF_RETIREMENT_MESSAGE=null;if(t==0){this.END_OF_RETIREMENT_MESSAGE=this.MSG_RUNOUT;this.RESULTS_MSG=this.MSG_LABEL_4;this.RESPONSE=this.RESPONSE2}else{this.END_OF_RETIREMENT_MESSAGE=this.MSG_SUCCESS;this.RESULTS_MSG=this.MSG_LABEL_3;this.RESPONSE=this.RESPONSE1}if(this.NEST_EGG){this.RESULTS_MSG=KJE.getKJEReplaced(this.MSG_TITLE,e.dollars(this.DD_RETIRE1[0]),e.number(x))}J=0;if(t==0){this.dAdjustedSavingsRate=this.getAdjustedSavingsRate((m+f),w,j);this.dAdjustedRorRate=this.getAdjustedRorRate((m+f),w,j);this.dAdjustedSalaryPercent=this.getAdjustedSalaryPercent((m+f),w,j);this.dAdjusteYearsToRetirement=this.getAdjustedYearsToRetirement((m+f),w,j)+m;if(h<=1){c=this.DD_RETIRE1[2]}else{c=e.round(this.dAdjustedSavingsRate*A,2)}J=e.round(c/12,2)}if(this.INFLATION_RESULTS){for(T=0;T<4;T++){this.DS_INFLATION_INCREASE[T]=(T*0.03+o/100);if(T==3){this.DS_INFLATION_INCREASE[T]=((T+1)*0.03+o/100)}this.DS_INFLATION_RUNOUT[T]=this.getRunoutAge(m,p,s/100,A,w,W/100,this.DS_INFLATION_INCREASE[T],j,this.INCOME_PERCENT/100,L,o/100,h,M,g,110,true);this.CS_INFLATION_RUNOUT[T]=e.percent(this.DS_INFLATION_INCREASE[T])}}if(this.SAVEMORE_RESULTS){for(T=0;T<5;T++){this.DS_SAVEMORE_INCREASE[T]=(T*0.04+W/100);this.DS_SAVEMORE_RUNOUT[T]=this.getRunoutAge(m,p,s/100,A,w,this.DS_SAVEMORE_INCREASE[T],o/100,j,this.INCOME_PERCENT/100,L,o/100,h,M,g,110,true);this.CS_SAVEMORE_RUNOUT[T]=e.percent(this.DS_SAVEMORE_INCREASE[T])}}if(P){var G=this.sSchedule;G.clearRepeat();var I=(L||this.OTHER_PENSION_COUNT>0?G.sReportCol(D?"Pension Income<br />OAS/CPP<br />or QPP":"Social<br />Security<br />Income",5):null);if(I&&!L){I=I.replace("<!--STARTHIDETAXES-->","<!--").replace("<!--ENDHIDETAXES-->","-->")}if(this.SHORT_RESULTS){G.addHeader(G.sReportCol("Age",9),G.sReportCol("Interest<br /> and<br /> Savings",8),G.sReportCol("Retirement<br />Account<br />Withdrawals",6),G.sReportCol("Ending<br />Retirement<br />Balance",7))}else{G.addHeader(G.sReportCol("Age",9),G.sReportCol("Beginning<br />Retirement<br />Balance",1),G.sReportCol(" <br />Investment<br />Growth",2),(!this.NEST_EGG?(this.INCREASE_ANNUAL_SAVINGS?KJE.replace("CALC_RESULT",e.percent(W/100,2),G.sReportCol("Contributions<br />at CALC_RESULT<br />of Income",3)):KJE.replace("CALC_RESULT",e.percent(W/100,2),G.sReportCol("<br /><br />Contributions",10))):null),KJE.replace("CALC_RESULT",e.percent(this.INCOME_PERCENT/100,0),G.sReportCol("Retire<br />with CALC_RESULT<br />of Income",4)),I,(this.USE_NET_INCOME?G.sReportCol("Estimated<br />Retirement<br />Taxes",8):null),G.sReportCol("Retirement<br />Account<br />Withdrawals",6),G.sReportCol("Ending<br />Retirement<br />Balance",7))}}if(!L){this.DS_RETIRE1=KJE.FloatArray(2);this.cats2=new Array(2);this.cats2[0]=this.CAT_LABELS[0]+" "+e.dollars(this.DD_RETIRE1[0]);this.cats2[1]=this.CAT_LABELS[2]+" "+e.dollars(this.DD_RETIRE1[2]);for(R=0;R<this.DS_RETIRE1.length;R++){this.DS_RETIRE1[R]=((this.DD_RETIRE1[R+1]))}}else{this.DS_RETIRE1=KJE.FloatArray(3);this.cats2=new Array(3);for(R=0;R<this.DS_RETIRE1.length;R++){this.DS_RETIRE1[R]=((this.DD_RETIRE1[R]));this.cats2[R]=this.CAT_LABELS[R]+" "+e.dollars(this.DD_RETIRE1[R])}}for(T=1;T<=f;T++){U=T-1;this.cats[U]=e.number(T+m);if(this.DR_ENDING_BALANCE[U]<0){this.DR_ENDING_BALANCE[U]=0;this.DR_RETIREMENT_WITHDRAWAL[U]=0}if(P){if(this.SHORT_RESULTS){G.addRepeat(e.number(T+m,0),e.dollars(this.DR_INTEREST[U]+this.DR_SAVINGS[U],this.iDecimals),e.dollars(this.DR_RETIREMENT_WITHDRAWAL[U],this.iDecimals),e.dollars(this.DR_ENDING_BALANCE[U],this.iDecimals))}else{G.addRepeat(e.number(T+m,0),e.dollars(this.DR_BEGINING_BALANCE[U],this.iDecimals),e.dollars(this.DR_INTEREST[U],this.iDecimals),(this.NEST_EGG?null:e.dollars(this.DR_SAVINGS[U],this.iDecimals)),e.dollars(this.DR_RETIREMENT_INCOME[U],this.iDecimals),(L||this.OTHER_PENSION_COUNT>0?e.dollars(this.DR_SOCIAL_SECURITY_INCOME[U],this.iDecimals):null),(this.USE_NET_INCOME?e.dollars(this.DR_RETIREMENT_TAXES[U],this.iDecimals):null),e.dollars(this.DR_RETIREMENT_WITHDRAWAL[U],this.iDecimals),e.dollars(this.DR_ENDING_BALANCE[U],this.iDecimals))}}if(this.DR_RETIREMENT_WITHDRAWAL[U]<0){this.DR_RETIREMENT_WITHDRAWAL[U]=0}}if(this.MSG_START_OF_MESSAGE=("")){this.START_OF_MESSAGE=""}else{this.START_OF_MESSAGE=KJE.replace("NEED_AT_RETIRE_AFSS",e.dollars(this.DD_RETIRE1[1],0),this.MSG_START_OF_MESSAGE);this.START_OF_MESSAGE=KJE.replace("NEED_THRU_RETIRE_AFSS",e.dollars(this.DD_RETIRE2[1],0),this.START_OF_MESSAGE)+" "}this.SOCIAL_SECURITY_PERCENT=b;this.SOCIAL_SECURITY_SALARY=d;this.ENDING_BALANCE=t;this.ANNUAL_SAVINGS=H;this.MONTHLY_SAVINGS=r;this.INCOME_AT_RETIRE=V;this.INCOME_AT_RETIRE_NET=C;this.INCOME_REQUIRED_AT_RETIRE=F;this.INCOME_REQUIRED_AT_RETIRE_NET=l;this.SOCIALSECURITY_AT_RETIRE=g;this.SOCIALSECURITY_START_AGE=M;this.BALANCE_AT_RETIRE=B;this.ADJUST_ANNUAL_SAVINGS=c;this.ADJUST_MONTHLY_SAVINGS=J};KJE.RetirementPlanCalc.prototype.formatReport=function(a){var c=KJE;var b=this.iDecimal;var d=a;d=KJE.replace("END_OF_RETIREMENT_MESSAGE",this.END_OF_RETIREMENT_MESSAGE,d);var e=0;for(e=0;e<this.OTHER_PENSION_START.length;e++){d=KJE.replace("OTHER_PENSION_START"+(e+1),c.number(this.OTHER_PENSION_START[e]>this.AGE_OF_RETIREMENT?this.OTHER_PENSION_START[e]:this.AGE_OF_RETIREMENT),d);d=KJE.replace("OTHER_PENSION_AMOUNT"+(e+1),c.dollars(this.OTHER_PENSION_AMOUNT_ADJUSTED[e],b),d);d=KJE.replace("OTHER_PENSION_INFLATION"+(e+1),(this.OTHER_PENSION_INFLATION[e]?this.MSG_INFLATION_REPORT:""),d);d=KJE.replace("OTHER_PENSION_LASTS"+(e+1),c.number(this.OTHER_PENSION_LASTS[e]),d)}if(this.INFLATION_RESULTS){for(e=0;e<4;e++){d=KJE.replace("INFLATION_INCREASE"+e,c.percent(this.DS_INFLATION_INCREASE[e],2),d);if(this.DS_INFLATION_RUNOUT[e]<110){d=KJE.replace("INFLATION_MSG"+e,KJE.replace("KJE1",c.number(this.DS_INFLATION_RUNOUT[e],this.MSG_RUNOUT_REPORT),d))}else{d=KJE.replace("INFLATION_MSG"+e,this.MSG_SUCCESS_REPORT,d)}}}if(this.SAVEMORE_RESULTS){for(e=0;e<5;e++){d=KJE.replace("SAVEMORE_INCREASE"+e,c.percent(this.DS_SAVEMORE_INCREASE[e],2),d);if(this.DS_SAVEMORE_RUNOUT[e]<110){d=KJE.replace("SAVEMORE_MSG"+e,this.MSG_RUNOUT_REPORT+" "+c.number(this.DS_SAVEMORE_RUNOUT[e]),d)}else{d=KJE.replace("SAVEMORE_MSG"+e,this.MSG_SUCCESS_REPORT,d)}}}if(this.ENDING_BALANCE==0&&!this.bATRETIREMENT&&this.CURRENT_AGE!=this.AGE_OF_RETIREMENT-1){d=KJE.replace("<!--ADJUST_ADVICE-->","",d);d=KJE.replace("<!--/ADJUST_ADVICE-->","",d);d=KJE.replace("<ADJUST_ADVICE>","",d);d=KJE.replace("<ADJUST_ADVICE>","",d);d=KJE.replace("ADJUST_SAVINGS_RATE",c.percent(this.dAdjustedSavingsRate,2),d);d=KJE.replace("ADJUST_ROR",c.percent(this.dAdjustedRorRate,2),d);d=KJE.replace("ADJUST_INCOME_REQUIRED",c.percent(this.dAdjustedSalaryPercent),d);d=KJE.replace("ADJUST_YEARS",c.number(this.dAdjusteYearsToRetirement),d)}else{d=KJE.replace("<!--ADJUST_ADVICE-->","<!--",d);d=KJE.replace("<!--/ADJUST_ADVICE-->","-->",d);d=KJE.replace("<ADJUST_ADVICE>","<!--",d);d=KJE.replace("<ADJUST_ADVICE>","-->",d)}d=KJE.replace("ADJUST_ANNUAL_SAVINGS",c.dollars(this.ADJUST_ANNUAL_SAVINGS,2),d);d=KJE.replace("ADJUST_MONTHLY_SAVINGS",c.dollars(this.ADJUST_MONTHLY_SAVINGS,2),d);d=KJE.replace("INCREASE_ANNUAL_SAVINGS",(this.INCREASE_ANNUAL_SAVINGS?"will":"does not"),d);d=KJE.replace("CURRENT_AGE",c.number(this.CURRENT_AGE+(this.bATRETIREMENT?1:0)),d);d=KJE.replace("HOUSEHOLD_INCOME",c.dollars(this.HOUSEHOLD_INCOME,b),d);d=KJE.replace("PRE_RATE_OF_RETURN",c.percent(this.PRE_RATE_OF_RETURN/100,2),d);d=KJE.replace("AGE_OF_RETIREMENT",c.number(this.AGE_OF_RETIREMENT),d);d=KJE.replace("POST_RATE_OF_RETURN",c.percent(this.POST_RATE_OF_RETURN/100,2),d);d=KJE.replace("SALARY_PERCENT",c.percent(this.SALARY_PERCENT/100,2),d);d=KJE.replace("YEARS_UNTIL_RETIREMENT",c.number(this.YEARS_UNTIL_RETIREMENT),d);d=KJE.replace("YEARS_OF_RETIREMENT",c.number(this.YEARS_OF_RETIREMENT),d);d=KJE.replace("INCOME_PERCENT",c.percent(this.INCOME_PERCENT/100,2),d);d=KJE.replace("CURRENT_SAVINGS",c.dollars(this.CURRENT_SAVINGS,b),d);d=KJE.replace("INFLATION_RATE",c.percent(this.INFLATION_RATE/100,1),d);if(this.INCLUDE_SOCIAL_SECURITY){d=KJE.replace("SOCIAL_SECURITY_MSG",this.MSG_SOCIAL_SECURITY,d);d=KJE.replace("SOCIALSECURITY_AT_RETIRE",c.dollars(this.SOCIALSECURITY_AT_RETIRE,b),d)}else{d=KJE.replace("SOCIAL_SECURITY_MSG","",d);d=KJE.replace("SOCIALSECURITY_AT_RETIRE",c.dollars(0,b),d)}d=KJE.replace("RETIREMENT_TAX_WITHDRAWALS",c.yesno(this.RETIREMENT_TAX_WITHDRAWALS),d);d=KJE.replace("SOCIAL_SECURITY_TAX_WITHDRAWALS",c.yesno(this.SOCIAL_SECURITY_TAX_WITHDRAWALS),d);d=KJE.replace("INCLUDE_SOCIAL_SECURITY",c.yesno(this.INCLUDE_SOCIAL_SECURITY),d);d=KJE.replace("INCLUDE_SOCIAL_SECURITY",c.yesno(this.INCLUDE_SOCIAL_SECURITY),d);d=KJE.replace("CURRENT_TAX",c.percent(this.CURRENT_TAX/100),d);d=KJE.replace("RETIREMENT_TAX",c.percent(this.RETIREMENT_TAX/100),d);d=KJE.replace("MARRIED",c.yesno(this.MARRIED),d);d=KJE.replace("SOCIAL_SECURITY_PERCENT",c.percent(this.SOCIAL_SECURITY_PERCENT),d);d=KJE.replace("SOCIAL_SECURITY_SALARY",c.dollars(this.SOCIAL_SECURITY_SALARY,b),d);d=KJE.replace("PV_ENDING_BALANCE",c.dollars(KJE.NPV_AMT(this.INFLATION_RATE/100,Math.round(this.YEARS_UNTIL_RETIREMENT+this.YEARS_OF_RETIREMENT),this.ENDING_BALANCE),b),d);d=KJE.replace("ENDING_BALANCE",c.dollars(this.ENDING_BALANCE,b),d);d=KJE.replace("SAVINGS_PERCENT",c.percent(this.SAVINGS_PERCENT/100,2),d);d=KJE.replace("ANNUAL_SAVINGS",c.dollars(this.ANNUAL_SAVINGS,b),d);d=KJE.replace("MONTHLY_SAVINGS",c.dollars(this.MONTHLY_SAVINGS,b),d);d=KJE.replace("INCOME_AT_RETIRE_NET",c.dollars(this.INCOME_AT_RETIRE_NET,b),d);d=KJE.replace("INCOME_AT_RETIRE",c.dollars(this.INCOME_AT_RETIRE,b),d);d=KJE.replace("INCOME_REQUIRED_AT_RETIRE_NET",c.dollars(this.INCOME_REQUIRED_AT_RETIRE_NET,b),d);d=KJE.replace("INCOME_REQUIRED_AT_RETIRE",c.dollars(this.INCOME_REQUIRED_AT_RETIRE,b),d);d=KJE.replace("SOCIALSECURITY_START_AGE",c.number(this.SOCIALSECURITY_START_AGE),d);d=KJE.replace("BALANCE_AT_RETIRE",c.dollars(this.BALANCE_AT_RETIRE,b),d);d=KJE.replace("RESULTS_MSG",this.RESULTS_MSG,d);d=KJE.replace("RESPONSE",this.RESPONSE,d);d=KJE.replace("AGE_RUN_OUT",c.number(this.AGE_RUN_OUT),d);d=KJE.replace("ENDING_BALANCE",c.dollars(this.ENDING_BALANCE),d);d=KJE.replace("NEED_AT_RETIRE_AFSS",c.dollars(this.DD_RETIRE1[1]),d);d=KJE.replace("NEED_AT_RETIRE_PLAN",c.dollars(this.DD_RETIRE1[2]),d);d=KJE.replace("NEED_AT_RETIRE",c.dollars(this.DD_RETIRE1[0]),d);d=KJE.replace("NEED_THRU_RETIRE_AFSS",c.dollars(this.DD_RETIRE2[1]),d);d=KJE.replace("NEED_THRU_RETIRE_PLAN",c.dollars(this.DD_RETIRE2[2]),d);d=KJE.replace("NEED_THRU_RETIRE",c.dollars(this.DD_RETIRE2[0]),d);d=d.replace("**REPEATING GROUP**",this.sSchedule.getRepeat());this.sSchedule.clearRepeat();return d};KJE.RetirementPlanCalc.prototype.formatGraph=function(a,b){if(!this.NEST_EGG&&b[0]){b[0].setTitle(this.MSG_GRAPH_REPORT_TITLE);b[0].setTitleGraph(this.MSG_GRAPH_REPORT_TITLE);b[0].show(true);b[0].paint()}};KJE.RetirementPlanCalc.prototype.getRunoutAge=function(v,y,F,u,H,g,E,e,b,h,z,A,r,w,J,j){var a=y;var G=0;var l=0;var D=0;var t=0;var x=0;var p=0;var C=0;var I=0;var B=0;var d=u*g;var c=this.USE_NET_INCOME;var m=this.CURRENT_TAX/100;for(var s=1;s<=(J-v);s++){B=0;I=0;p=0;C=0;if((A-s)>0){G=KJE.FV_AMT(F,s,u);l=a*(H);D=(this.INCREASE_ANNUAL_SAVINGS?G*(g):d);t=0;x=G}else{G=KJE.FV_AMT(E,s-A,x);l=a*(e);D=0;t=G*(b)*(1-(c?m:0));if(((s+v)-r>=0)&&(h>0)){p=KJE.FV_AMT(z,(s+v)-r,w);if(this.SOCIAL_SECURITY_TAX_WITHDRAWALS){B=p*(this.RETIREMENT_TAX/200)}}var k=this.OTHER_PENSION_AMOUNT.length;var i=0;for(var o=0;o<k;o++){if(this.OTHER_PENSION_AMOUNT_ADJUSTED[o]>0){i=this.OTHER_PENSION_START[o]==0?(s-A):(s+v-this.OTHER_PENSION_START[o]);if(this.OTHER_PENSION_LASTS[o]==0||this.OTHER_PENSION_LASTS[o]>i){if(this.OTHER_PENSION_INFLATION[o]){I+=KJE.FV_AMT(E,(s),this.OTHER_PENSION_AMOUNT_ADJUSTED[o]*12)}else{I+=this.OTHER_PENSION_AMOUNT_ADJUSTED[o]*12}}}}if(this.RETIREMENT_TAX_WITHDRAWALS){B=I*(this.RETIREMENT_TAX/100)}C=t+B-p-I;if(c&&C>0&&this.RETIREMENT_TAX_WITHDRAWALS){var f=C/(1-(this.RETIREMENT_TAX/100));B+=f-C;C=f}}a=a+l+D-C;if(a<0){J=s+v;break}}if(j){return J}return a};KJE.RetirementPlanCalc.prototype.getAdjustedSavingsRate=function(b,e,d){var c=200;var g=c/2;var a=0;for(var f=1;f<50;f++){a=this.getRunoutAge(this.CURRENT_AGE,this.CURRENT_SAVINGS,this.SALARY_PERCENT/100,this.HOUSEHOLD_INCOME,e,c,this.INFLATION_RATE/100,d,this.INCOME_PERCENT/100,this.INCLUDE_SOCIAL_SECURITY,this.INFLATION_RATE/100,this.YEARS_UNTIL_RETIREMENT,this.SOCIALSECURITY_START_AGE,this.SOCIALSECURITY_AT_RETIRE,b,false);if(a>0&&a<1){return KJE.round(c+5e-8,7)}else{if(a<=0){c+=g}else{c-=g}}g=g/2}return KJE.round(c+5e-8,7)};KJE.RetirementPlanCalc.prototype.getAdjustedRorRate=function(b,e,d){var c=e;var h=0.5;var a=0;var f=KJE;for(var g=1;g<50;g++){a=this.getRunoutAge(this.CURRENT_AGE,this.CURRENT_SAVINGS,this.SALARY_PERCENT/100,this.HOUSEHOLD_INCOME,c,this.SAVINGS_PERCENT/100,this.INFLATION_RATE/100,d,this.INCOME_PERCENT/100,this.INCLUDE_SOCIAL_SECURITY,this.INFLATION_RATE/100,this.YEARS_UNTIL_RETIREMENT,this.SOCIALSECURITY_START_AGE,this.SOCIALSECURITY_AT_RETIRE,b,false);if(a>0&&a<1){return f.round(c+0.00005,4)}else{if(a<=0){c+=h}else{c-=h}}h=h/2}return f.round(c+0.00005,4)};KJE.RetirementPlanCalc.prototype.getAdjustedSalaryPercent=function(b,e,d){var c=this.INCOME_PERCENT/100;var h=0.5;var a=0;var f=KJE;for(var g=1;g<50;g++){a=this.getRunoutAge(this.CURRENT_AGE,this.CURRENT_SAVINGS,this.SALARY_PERCENT/100,this.HOUSEHOLD_INCOME,e,this.SAVINGS_PERCENT/100,this.INFLATION_RATE/100,d,c,this.INCLUDE_SOCIAL_SECURITY,this.INFLATION_RATE/100,this.YEARS_UNTIL_RETIREMENT,this.SOCIALSECURITY_START_AGE,this.SOCIALSECURITY_AT_RETIRE,b,false);if(a>0&&a<1){return f.round(c-0.005,2)}else{if(a<=0){c-=h}else{c+=h}}h=h/2}return f.round(c-0.005,4)};KJE.RetirementPlanCalc.prototype.getAdjustedYearsToRetirement=function(c,i,h){var g=0;var f=this.INCLUDE_SOCIAL_SECURITY;if(f){var d=new KJE.SocialSecurityCalc()}for(var b=1;b<50;b++){var e=0;var a=0;if(this.INCLUDE_SOCIAL_SECURITY){d.clear();d.CURRENT_AGE=(this.CURRENT_AGE>69?69:this.CURRENT_AGE);d.HOUSEHOLD_INCOME=this.HOUSEHOLD_INCOME;d.AGE_OF_RETIREMENT=(this.CURRENT_AGE+this.YEARS_UNTIL_RETIREMENT+b>70?70:this.CURRENT_AGE+this.YEARS_UNTIL_RETIREMENT+b);d.SALARY_PERCENT=this.SALARY_PERCENT;d.SOCIAL_SECURITY_INCREASE_RATE=this.INFLATION_RATE;d.MARRIED=this.MARRIED;d.calculate();a=d.SOCIAL_AT_RETIRE_AMT;e=d.SOCIAL_AT_RETIRE_AGE}g=this.getRunoutAge(this.CURRENT_AGE,this.CURRENT_SAVINGS,this.SALARY_PERCENT/100,this.HOUSEHOLD_INCOME,i,this.SAVINGS_PERCENT/100,this.INFLATION_RATE/100,h,this.INCOME_PERCENT/100,this.INCLUDE_SOCIAL_SECURITY,this.INFLATION_RATE/100,(this.YEARS_UNTIL_RETIREMENT+b),e,a,c+b,false);if(g>0){return(this.YEARS_UNTIL_RETIREMENT+b)}}return(this.YEARS_UNTIL_RETIREMENT+50)};KJE.RetirementPlanCalc.prototype.getGraphTitle=function(b){var a="";if(this.NEST_EGG){a=KJE.getKJEReplaced(this.MSG_GRAPH_TITLE,KJE.dollars(this.ADJUST_MONTHLY_SAVINGS))}else{if(KJE.lang!="EN"){a=this.MSG_GRAPH_REPORT_TITLE}else{a=(this.MSG_RESULT_EXTRA_GRAPH==""?(this.ENDING_BALANCE>0?this.MSG_SUCCESS:this.MSG_RUNOUT):this.MSG_RESULT_EXTRA_GRAPH)+"<div class='KJESubTitle KJELeft'>"+this.MSG_RESULT_EXTRA+this.MSG_RESULT+(this.SHOW_SOCIAL?" "+this.MSG_RESULT_SOCIAL:"")+"</div>";if(b){a=KJE.replace("AGE_RUN_OUT",KJE.number(this.AGE_RUN_OUT),a);a=KJE.replace("ENDING_BALANCE",KJE.dollars(this.ENDING_BALANCE),a);a=KJE.replace("NEED_AT_RETIRE_AFSS",KJE.dollars(this.DD_RETIRE1[1]),a);a=KJE.replace("NEED_THRU_RETIRE_AFSS",KJE.dollars(this.DD_RETIRE2[1]),a);a=KJE.getKJEReplaced(a,KJE.dollars(this.BALANCE_AT_RETIRE),KJE.dollars(this.INCOME_REQUIRED_AT_RETIRE),KJE.percent(this.INCOME_PERCENT/100),KJE.dollars(this.INCOME_AT_RETIRE),(this.SHOW_SOCIAL?KJE.dollars(this.SOCIALSECURITY_AT_RETIRE):""))}}}return a};KJE.CalcName="Retirement Planner";KJE.CalcType="retirementplan";KJE.CalculatorTitleTemplate="KJE1";KJE.gHeight=300;KJE.initialize=function(){KJE.CalcControl=new KJE.RetirementPlanCalc();KJE.GuiControl=new KJE.RetirementPlan(KJE.CalcControl)};KJE.RetirementPlan=function(i){var e=KJE;var g=KJE.inputs.items;KJE.NumberSlider("CURRENT_AGE","Current age",14,90,0);KJE.DollarSlider("HOUSEHOLD_INCOME","Annual household income",1,10000000);KJE.InvestRateSlider("PRE_RATE_OF_RETURN","Rate of return before retirement");KJE.NumberSlider("AGE_OF_RETIREMENT","Age of retirement",10,90,0,1);KJE.InvestRateSlider("POST_RATE_OF_RETURN","Rate of return during retirement");KJE.PercentSlider("SALARY_PERCENT","Expected income increase",0,KJE.parameters.get("MAX_SALARY_PERCENT",20),2,1);KJE.NumberSlider("YEARS_OF_RETIREMENT","Years of retirement income",1,100,0,1);KJE.PercentSlider("INCOME_PERCENT","Income required at retirement",KJE.parameters.get("MIN_INCOME_PERCENT",40),KJE.parameters.get("MAX_INCOME_PERCENT",160),0,5);KJE.DollarSlider("CURRENT_SAVINGS","Current retirement savings",0,100000000,0,1,5);KJE.PercentSlider("SAVINGS_PERCENT","Annual retirement savings",0,100,2,1);KJE.InflationRateSlider("INFLATION_RATE","Expected rate of inflation");KJE.Checkbox("MARRIED","Married",true,"Check here");KJE.Checkbox("INCLUDE_SOCIAL_SECURITY","Include Social Security",true,"Check here");KJE.DollarSlider("OTHER_PENSION_AMOUNT1","Misc. income / pensions",KJE.parameters.get("OTHER_PENSION_AMT1_MIN",0),KJE.parameters.get("OTHER_PENSION_AMT1_MAX",10000));KJE.DollarSlider("OTHER_PENSION_AMOUNT2","Retirement work income",KJE.parameters.get("OTHER_PENSION_AMT2_MIN",0),KJE.parameters.get("OTHER_PENSION_AMT2_MAX",10000));KJE.DollarSlider("OTHER_PENSION_AMOUNT3","Additional retirement income",KJE.parameters.get("OTHER_PENSION_AMT3_MIN",0),KJE.parameters.get("OTHER_PENSION_AMT3_MAX",10000));KJE.Checkbox("OTHER_PENSION_INFLATION1","Increase with inflation",true,KJE.parameters.get("MSG_OTHER_PENSION_AMOUNT1","Misc. income / pensions"));KJE.Checkbox("OTHER_PENSION_INFLATION2","Increase with inflation",true,KJE.parameters.get("MSG_OTHER_PENSION_AMOUNT2","Retirement work income"));KJE.Checkbox("OTHER_PENSION_INFLATION3","Increase with inflation",true,KJE.parameters.get("MSG_OTHER_PENSION_AMOUNT3","Additional retirement income"));KJE.PercentSlider("CURRENT_TAX","Current tax rate",0,50,2);KJE.PercentSlider("RETIREMENT_TAX","Retirement tax rate",0,50,2);KJE.Checkbox("RETIREMENT_TAX_WITHDRAWALS","Tax retirement income",false,"Check here");KJE.Checkbox("SOCIAL_SECURITY_TAX_WITHDRAWALS","Tax 1/2 Social Security",false,"Check here");this.USE_OTHER_PENSION_START1=KJE.parameters.get("SHOW_PENSION_START1",false);this.USE_OTHER_PENSION_START2=KJE.parameters.get("SHOW_PENSION_START2",false);this.USE_OTHER_PENSION_START3=KJE.parameters.get("SHOW_PENSION_START3",false);if(this.USE_OTHER_PENSION_START1){KJE.NumberSlider("OTHER_PENSION_START1","Misc. income / pensions starts",KJE.parameters.get("OTHER_PENSION_START1_MIN",14),KJE.parameters.get("OTHER_PENSION_START1_MAX",90),0)}if(this.USE_OTHER_PENSION_START2){KJE.NumberSlider("OTHER_PENSION_START2","Retirement work income starts",KJE.parameters.get("OTHER_PENSION_START2_MIN",14),KJE.parameters.get("OTHER_PENSION_START2_MAX",90),0)}if(this.USE_OTHER_PENSION_START3){KJE.NumberSlider("OTHER_PENSION_START3","Additional retirement income starts",KJE.parameters.get("OTHER_PENSION_START3_MIN",14),KJE.parameters.get("OTHER_PENSION_START3_MAX",90),0)}this.USE_PENSION_LASTS1=KJE.parameters.get("SHOW_PENSION_YEAR1",false);this.USE_PENSION_LASTS2=KJE.parameters.get("SHOW_PENSION_YEAR2",false);if(this.USE_PENSION_LASTS1){KJE.NumberSlider("OTHER_PENSION_LASTS1","Years to work",0,30,0,1)}if(this.USE_PENSION_LASTS2){KJE.NumberSlider("OTHER_PENSION_LASTS2","Years to work",0,30,0,1)}var h=KJE.gNewGraph((i.NEST_EGG?KJE.gCATEGORIES:KJE.gLINE),"GRAPH1",true,false,KJE.colorList[1],i.getGraphTitle());if(h){h._titleXAxis.setText(KJE.parameters.get("MSG_GRAPH_1",""));h._axisX.setVisible(!i.NEST_EGG);h._axisY.setVisible(true);h._legend._iOrientation=KJE.gLegend.BOTTOM;h._showItemLabel=true;h._showItemLabelOnTop=true;h._axisX._fSpacingPercent=0.2}var a=KJE.parameters.get("MSG_DROPPER_TITLE","Retirement plan inputs:");var c=KJE.parameters.get("MSG_DROPPER_CLOSETITLE"," Retire at age KJE1 with KJE2 of current income");var j=function(){return a+KJE.subText(KJE.getKJEReplaced(c,KJE.number(i.AGE_OF_RETIREMENT),KJE.percent(i.INCOME_PERCENT/100,3)),"KJECenter")};KJE.addDropper(new KJE.Dropper("INPUTS",true,a,j),KJE.colorList[0]);var b=KJE.parameters.get("MSG_DROPPER2_TITLE","Investment returns, inflation and Social Security:");var d=KJE.parameters.get("MSG_DROPPER2_CLOSETITLE","KJE1&nbsp;pre-retirement, KJE2&nbsp;in&nbsp;retirement, KJE3&nbsp;inflation, Include&nbsp;Social&nbsp;Security?&nbsp;KJE4");var f=function(){return b+KJE.subText(KJE.getKJEReplaced(d,KJE.percent(i.PRE_RATE_OF_RETURN/100,3),KJE.percent(i.POST_RATE_OF_RETURN/100,3),KJE.percent(i.INFLATION_RATE/100,3),(i.INCLUDE_SOCIAL_SECURITY?KJE.MSG_YES:KJE.MSG_NO)),"KJECenter")};KJE.addDropper(new KJE.Dropper("INPUTS2",false,b,f),KJE.colorList[0]);this.DIV_RESULTS=document.getElementById("KJE-C-RESULTS");KJE.addDiv("RESULTS",KJE.colorList[1])};KJE.RetirementPlan.clear=function(){if(this.DIV_RESULTS){this.DIV_RESULTS.innerHTML=""}};KJE.RetirementPlan.prototype.setValues=function(b){var a=KJE.inputs.items;b.CURRENT_AGE=a.CURRENT_AGE.getValue();b.HOUSEHOLD_INCOME=a.HOUSEHOLD_INCOME.getValue();b.PRE_RATE_OF_RETURN=a.PRE_RATE_OF_RETURN.getValue();b.AGE_OF_RETIREMENT=a.AGE_OF_RETIREMENT.getValue();b.POST_RATE_OF_RETURN=a.POST_RATE_OF_RETURN.getValue();b.SALARY_PERCENT=a.SALARY_PERCENT.getValue();b.YEARS_OF_RETIREMENT=a.YEARS_OF_RETIREMENT.getValue();b.INCOME_PERCENT=a.INCOME_PERCENT.getValue();b.CURRENT_SAVINGS=a.CURRENT_SAVINGS.getValue();b.INFLATION_RATE=a.INFLATION_RATE.getValue();b.SAVINGS_PERCENT=a.SAVINGS_PERCENT.getValue();b.INCLUDE_SOCIAL_SECURITY=a.INCLUDE_SOCIAL_SECURITY.getValue();b.MARRIED=a.MARRIED.getValue();b.CURRENT_TAX=a.CURRENT_TAX.getValue();b.RETIREMENT_TAX=a.RETIREMENT_TAX.getValue();b.OTHER_PENSION_AMOUNT[0]=a.OTHER_PENSION_AMOUNT1.getValue();b.OTHER_PENSION_AMOUNT[1]=a.OTHER_PENSION_AMOUNT2.getValue();b.OTHER_PENSION_AMOUNT[2]=a.OTHER_PENSION_AMOUNT3.getValue();b.OTHER_PENSION_INFLATION[0]=a.OTHER_PENSION_INFLATION1.getValue();b.OTHER_PENSION_INFLATION[1]=a.OTHER_PENSION_INFLATION2.getValue();b.OTHER_PENSION_INFLATION[2]=a.OTHER_PENSION_INFLATION3.getValue();b.RETIREMENT_TAX_WITHDRAWALS=a.RETIREMENT_TAX_WITHDRAWALS.getValue();b.SOCIAL_SECURITY_TAX_WITHDRAWALS=a.SOCIAL_SECURITY_TAX_WITHDRAWALS.getValue();if(this.USE_PENSION_LASTS1){b.OTHER_PENSION_LASTS[0]=a.OTHER_PENSION_LASTS1.getValue()}if(this.USE_PENSION_LASTS2){b.OTHER_PENSION_LASTS[1]=a.OTHER_PENSION_LASTS2.getValue()}if(this.USE_OTHER_PENSION_START1){b.OTHER_PENSION_START[0]=a.OTHER_PENSION_START1.getValue()}if(this.USE_OTHER_PENSION_START2){b.OTHER_PENSION_START[1]=a.OTHER_PENSION_START2.getValue()}if(this.USE_OTHER_PENSION_START3){b.OTHER_PENSION_START[2]=a.OTHER_PENSION_START3.getValue()}};KJE.RetirementPlan.prototype.refresh=function(c){var b=KJE;var a=KJE.gGraphs[0];KJE.setTitleTemplate(c.RESULTS_MSG);if(a){a.removeAll();a.setTitle(c.getGraphTitle(true));if(c.NEST_EGG){a.setGraphCategories(c.cats2);a.add(new KJE.gGraphDataSeries(c.DS_RETIRE1,c.sGraph2,a.getColor(1)))}else{a.setGraphCategories(c.cats);a.add(new KJE.gGraphDataSeries(c.DR_ENDING_BALANCE,c.sGraph2,a.getColor(1)));a.add(new KJE.gGraphDataSeries(c.DR_RETIREMENT_WITHDRAWAL,c.sGraph3,a.getColor(2)))}a.paint()}if(this.DIV_RESULTS){this.DIV_RESULTS.innerHTML="<div style='margin-right:10px'>"+KJE.setToggleTitleText(c.getGraphTitle(true),null,KJE)+"</div>"}};KJE.InputScreenText=" <div id=KJE-D-INPUTS><div id=KJE-P-INPUTS>Input information:</div></div> <div id=KJE-E-INPUTS > <div id='KJE-C-CURRENT_AGE'><input id='KJE-CURRENT_AGE' /></div> <div id='KJE-C-AGE_OF_RETIREMENT'><input id='KJE-AGE_OF_RETIREMENT' /></div> <div id='KJE-C-HOUSEHOLD_INCOME'><input id='KJE-HOUSEHOLD_INCOME' /></div> <div id='KJE-C-SAVINGS_PERCENT'><input id='KJE-SAVINGS_PERCENT' /></div> <div id='KJE-C-CURRENT_SAVINGS'><input id='KJE-CURRENT_SAVINGS' /></div> <div id='KJE-C-SALARY_PERCENT'><input id='KJE-SALARY_PERCENT' /></div> <div id='KJE-C-INCOME_PERCENT'><input id='KJE-INCOME_PERCENT' /></div> <div id='KJE-C-YEARS_OF_RETIREMENT'><input id='KJE-YEARS_OF_RETIREMENT' /></div> <div style=\"height:10px\"></div> </div> <div id=KJE-D-INPUTS2><div id=KJE-P-INPUTS2>Input information:</div></div> <div id=KJE-E-INPUTS2 > <div id='KJE-C-PRE_RATE_OF_RETURN'><input id='KJE-PRE_RATE_OF_RETURN' /></div> <div id='KJE-C-POST_RATE_OF_RETURN'><input id='KJE-POST_RATE_OF_RETURN' /></div> <div id='KJE-C-INFLATION_RATE'><input id='KJE-INFLATION_RATE' /></div> <div id='KJE-C-MARRIED'><input id='KJE-MARRIED' type=checkbox /></div> <div id='KJE-C-INCLUDE_SOCIAL_SECURITY'><input id='KJE-INCLUDE_SOCIAL_SECURITY' type=checkbox /></div> <div style=\"height:10px\"></div> </div> **GRAPH1** ";KJE.DefinitionText=" <div id='KJE-D-CURRENT_AGE' ><dt>Current age</dt><dd>Your current age.</dd></div> <div id='KJE-D-AGE_OF_RETIREMENT' ><dt>Age of retirement</dt><dd>Age you wish to retire. This calculator assumes that the year you retire, you do not make any contributions to your retirement savings. So if you retire at age 65, your last contribution occurs when you are actually age 64. This calculator also assumes that you make your entire contribution at the end of each year.</dd></div> <div id='KJE-D-HOUSEHOLD_INCOME' ><dt>Household income</dt><dd>Your total household income. If you are married, this should include your spouse's income.</dd></div> <div id='KJE-D-CURRENT_SAVINGS' ><dt>Current retirement savings</dt><dd>Total amount that you currently have saved toward your retirement. Include all sources of retirement savings such as 401(k)s, IRAs and annuities.</dd></div> <div id='KJE-D-PRE_RATE_OF_RETURN' ><dt>Rate of return before retirement</dt><dd>This is the annual rate of return you expect from your retirement savings and investments. This should also be an after-tax rate of return if the majority of your retirement savings is not in a tax-deferred account such as a 403(b), 401(k), 457(b), annuity or IRA. **ROR_DEFINITION**</dd></div> <div id='KJE-D-POST_RATE_OF_RETURN' ><dt>Rate of return during retirement</dt><dd>This is the annual rate of return you expect from your savings and investments during retirement. This should also be an after-tax rate of return if the majority of your retirement savings is not in a tax-deferred account such as a 403(b), 401(k), 457(b), annuity or IRA. It is often lower than the return earned before retirement due to more conservative investment choices to help insure a steady flow of income. **ROR_DEFINITION**</dd></div> <div id='KJE-D-SAVINGS_PERCENT' ><dt>Annual retirement savings</dt><dd>The percentage of your annual income you plan to contribute to your retirement savings. This should reflect the total you save toward your retirement. <!--STARTHIDETAXES-->This should include any 403(b), 401(k), or 457(b) plans and your employer's contribution to these plans. It should also include any other retirement accounts such as an IRA or a Roth IRA and any retirement savings in non-retirement accounts.<!--ENDHIDETAXES--> <strong>This calculator assumes that you make one annual contribution at the end of each year, and any withdrawals happen once per year at the end of the year.</strong></dd></div> <div id='KJE-D-SALARY_PERCENT' ><dt>Expected income increase</dt><dd>Annual percent increase you expect in your household income.</dd></div> <div id='KJE-D-YEARS_OF_RETIREMENT' ><dt>Years of retirement income</dt><dd>Total number of years you expect to use your retirement income.</dd></div> <div id='KJE-D-INCOME_PERCENT' ><dt>Income required at retirement</dt><dd>The percentage of your pre-retirement household income you think you will need in retirement. This amount is based on the household income earned during the year immediately before your retirement. You can change this amount to be as low as 40% and as high as 160%. The percentage should reflect an after-tax amount if the majority of your retirement savings is not in a tax-deferred savings account such as a 401(k), IRA or other tax-deferred account.</dd></div> <div id='KJE-D-INFLATION_RATE' ><dt>Expected rate of inflation</dt><dd>**INFLATION_DEFINITION** <!--STARTHIDETAXES--></dd></div> <div id='KJE-D-MARRIED' ><dt>Married checkbox</dt><dd>Check this box if you are married. Married couples have a higher maximum Social Security benefit than single wage earners.</dd></div> <div id='KJE-D-INCLUDE_SOCIAL_SECURITY' ><dt>Include Social Security checkbox</dt><dd>Check this box if you wish to include Social Security benefits in your retirement planning. Social Security is based on a sliding scale depending on your income, how long you work and at what age you retire. Social Security benefits automatically increase each year based on increases in the Consumer Price Index. Including a spouse increases your Social Security benefits by 1.5 times your individual estimated benefit. Please note that this calculator assumes that only one of the spouses work. Benefits could be different if your spouse worked and earned a benefit higher than one half of your benefit. If you are a married couple, and both spouses work, you may need to run the calculation twice &ndash; once for each spouse and their respective income. This calculator provides only an estimate of your benefits. <p>The calculations use the 2016 FICA income limit of $118,500 with an annual maximum Social Security benefit of $31,668 per year ($2,639 per month) for a single person and 1.5 times this amount for a married couple. To receive the maximum benefit would require earning the maximum FICA salary for nearly your entire career. You would also need to begin receiving benefits at your full retirement age of 66 or 67 (depending on your birthdate). This calculator rounds your age of full Social Security benefits to the next highest full year. If your birthdate is between 1955 and 1959 your actual full retirement age for Social Security is 66 plus two months for each year after 1954. Your actual benefit may be lower or higher depending on your work history and the complete compensation rules used by Social Security. <!--ENDHIDETAXES--></dd></div> ";KJE.ReportText=' <h2 class=\'KJEReportHeader KJEFontHeading\'>RESULTS_MSG</h2> <p>END_OF_RETIREMENT_MESSAGE RESPONSE This assumes annual retirement expenses of INCOME_REQUIRED_AT_RETIRE which is INCOME_PERCENT of your last year\'s income of INCOME_AT_RETIRE. SOCIAL_SECURITY_MSG <p>**GRAPH** <!--ADJUST_ADVICE--> <h2 class=\'KJEReportHeader KJEFontHeading\'>To help meet your goal, you may wish to do one of the following:</h2> <UL> <li>Increase contributions to ADJUST_SAVINGS_RATE of your income (ADJUST_ANNUAL_SAVINGS annual savings, which INCREASE_ANNUAL_SAVINGS increase as your income increases) <li>Increase your rate of return before retirement to ADJUST_ROR. <li>Reduce your required income in retirement to ADJUST_INCOME_REQUIRED of your final year\'s income. <li>Delay your retirement until age ADJUST_YEARS. </UL> <!--/ADJUST_ADVICE--> <div class=KJEReportTableDiv><table class=KJEReportTable><caption class=\'KJEHeaderRow KJEHeading\'>Retirement Plan Inputs</caption> <tr class=KJEOddRow><td class="KJELabel KJECellBorder KJECell50">Current age</td><td class="KJECell KJECell50">CURRENT_AGE</td></tr> <tr class=KJEEvenRow><td class="KJELabel KJECellBorder">Age of retirement</td><td class="KJECell">AGE_OF_RETIREMENT</td></tr> <tr class=KJEOddRow><td class="KJELabel KJECellBorder">Household income</td><td class="KJECell">HOUSEHOLD_INCOME</td></tr> <tr class=KJEEvenRow><td class="KJELabel KJECellBorder r">Current retirement savings</td><td class="KJECell">CURRENT_SAVINGS</td></tr> <tr class=KJEOddRow><td class="KJELabel KJECellBorder">Annual retirement savings</td><td class="KJECell">SAVINGS_PERCENT (ANNUAL_SAVINGS annually which INCREASE_ANNUAL_SAVINGS increase as your income increases)</td></tr> <tr class=KJEEvenRow><td class="KJELabel KJECellBorder">Expected income increase</td><td class="KJECell">SALARY_PERCENT</td></tr> <tr class=KJEOddRow><td class="KJELabel KJECellBorder">Years of retirement income</td><td class="KJECell">YEARS_OF_RETIREMENT</td></tr> <tr class=KJEEvenRow><td class="KJELabel KJECellBorder">Income required at retirement</td><td class="KJECell">INCOME_PERCENT</td></tr> <!--STARTHIDETAXES--> <tr class=KJEHeaderRow><th class=KJEHeading colspan=4>Investment Returns and Inflation</th></tr> <tr class=KJEOddRow><td class="KJELabel KJECellBorder">Rate of return before retirement</td><td class="KJECell">PRE_RATE_OF_RETURN</td></tr> <tr class=KJEEvenRow><td class="KJELabel KJECellBorder">Rate of return during retirement</td><td class="KJECell">POST_RATE_OF_RETURN</td></tr> <tr class=KJEOddRow><td class="KJELabel KJECellBorder">Expected inflation rate</td><td class="KJECell">INFLATION_RATE</td></tr> <tr class=KJEEvenRow><td class="KJELabel KJECellBorder">Are you married?</td><td class="KJECell">MARRIED</td></tr> <tr class=KJEOddRow><td class="KJELabel KJECellBorder">Include Social Security?</td><td class="KJECell">INCLUDE_SOCIAL_SECURITY</td></tr> <!--ENDHIDETAXES--> <tr class=KJEHeaderRow><th class=KJEHeading colspan=4>Result Summary</th></tr> <tr class=KJEOddRow><td class="KJELabel KJECellBorder">Years until retirement</td><td class="KJELabel">YEARS_UNTIL_RETIREMENT</td></tr> <tr class=KJEEvenRow><td class="KJELabel KJECellBorder">Your last year\'s income</td><td class="KJELabel">INCOME_AT_RETIRE</td></tr> <tr class=KJEOddRow><td class="KJELabel KJECellBorder">Estimated annual retirement expenditures</td><td class="KJELabel">INCOME_REQUIRED_AT_RETIRE</td></tr> <tr class=KJEEvenRow><td class="KJELabel KJECellBorder">Your ending balance</td><td class="KJELabel">ENDING_BALANCE</td></tr> </table> </div> <h2 class=\'KJEScheduleHeader KJEFontHeading\'>Balances by year*</h2> **REPEATING GROUP** <p class=KJEFooter>* This chart reflects fixed annual rates of return, expense, and income growth. It is meant solely as a guide. It is not likely that these and other variables will increase and decrease by a steady annual rate year over year.</p> ';